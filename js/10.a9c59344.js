(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"404a":function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));e("caad");var o=e("4204");e("bd4c");class s{static getInstance(){return new s}get(t,a){const e=t&&t.includes(" ")?t:`${t} 00:00:00`,s=a&&a.includes(" ")?a:`${a} 23:59:59`;return console.log("ventasDAO.get - Fechas recibidas:",t,a),console.log("ventasDAO.get - Fechas completas:",e,s),o["a"].ventas.where("create_at").between(e,s,!0,!0).toArray().then((t=>(console.log("ventasDAO.get - Resultados encontrados:",t.length),t)))}save(t){return o["a"].ventas.add(t)}getOne(t){return o["a"].ventas.get({id:t})}delete(t){return o["a"].ventas.delete(t)}getNombre(t){return o["a"].ventas.get({nombre:t})}}},4204:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));var o=e("4dec"),s=e("c056"),i=e("dc98"),r=e("abab");const n=new o["a"]("BODEGUITA");n.version(1).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at",ventas:"++id, total, *productos, create_at, update_at"}),n.version(2).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad"}),n.version(3).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia"}),n.version(4).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo"}),n.version(5).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva"}),n.version(6).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),n.version(7).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),n.version(8).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value"}),n.version(9).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),n.version(10).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),n.version(11).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado, monto_exento, monto_base, monto_iva, tasa_iva, monto_igtf, tasa_dolar, monto_dolar",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),n.open().catch((function(t){console.error("Fallo al abrir la base de datos: "+(t.stack||t))})),n.valores_dolar.mapToClass(s["a"]),n.movimientos.mapToClass(i["a"]),n.clientes.mapToClass(r["a"])},"47b6":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("q-page",{staticClass:"bg-grey-1 q-pa-md",attrs:{padding:""}},[a("q-card",{staticClass:"rounded-card shadow-1 q-mb-md bg-white"},[a("q-card-section",[a("div",{staticClass:"row q-col-gutter-sm"},[a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{staticClass:"rounded-borders",attrs:{filled:"",mask:"date",rules:["date"],label:"Fecha Inicio"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event",color:"primary"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"primary"},model:{value:t.inicio,callback:function(a){t.inicio=a},expression:"inicio"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.inicio,callback:function(a){t.inicio=a},expression:"inicio"}})],1),a("div",{staticClass:"col-12 col-sm-6"},[a("q-input",{staticClass:"rounded-borders",attrs:{filled:"",mask:"date",rules:["date"],label:"Fecha Fin"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event",color:"primary"}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"primary"},on:{input:t.getVentas},model:{value:t.fin,callback:function(a){t.fin=a},expression:"fin"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cerrar",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.fin,callback:function(a){t.fin=a},expression:"fin"}})],1)])])],1),a("q-card",{staticClass:"rounded-card bg-primary text-white shadow-2 q-mb-md"},[a("q-card-section",{staticClass:"row items-center justify-between"},[a("div",[a("div",{staticClass:"text-subtitle2 text-indigo-2"},[t._v("Total Ventas")]),a("div",{staticClass:"text-h5 text-indigo-2 text-weight-bold"},[t._v("\n          Bs "+t._s(t.formatMoney(t.total))+"\n        ")])]),t.total>0?a("q-btn",{attrs:{round:"",color:"white","text-color":"green",icon:"share",type:"a",href:t.url_whatsapp,target:"__blank",unelevated:""}}):t._e()],1)],1),t.ventas.length>0?a("div",[a("div",{staticClass:"text-h6 q-mb-sm text-grey-8"},[t._v("Historial")]),a("div",{staticClass:"row q-col-gutter-sm"},t._l(t.ventas,(function(e){return a("div",{key:e.id,staticClass:"col-12 col-md-6"},[a("q-card",{staticClass:"rounded-card shadow-1"},[a("q-item",{staticClass:"q-py-md"},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"indigo-1","text-color":"primary"}},[t._v("\n                "+t._s(e.id)+"\n              ")])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-weight-bold text-dark"},[t._v("\n                Bs "+t._s(t.formatMoney(e.total))+"\n              ")]),a("q-item-label",{attrs:{caption:"",lines:"1"}},[a("q-icon",{attrs:{name:"schedule",size:"xs"}}),t._v(" "+t._s(e.create_at)+"\n              ")],1)],1),a("q-item-section",{attrs:{side:""}},[a("div",{staticClass:"row q-gutter-xs"},[a("q-btn",{attrs:{round:"",flat:"",color:"primary",icon:"visibility"},on:{click:function(a){return t.modalProductos(e.productos)}}}),a("q-btn",{attrs:{round:"",flat:"",color:"negative",icon:"delete_outline"},on:{click:function(a){return t.eliminarProductoLista(e.id)}}})],1)])],1)],1)],1)})),0)]):a("div",{staticClass:"text-center q-mt-xl text-grey-5"},[a("q-icon",{staticClass:"q-mb-md",attrs:{name:"receipt_long",size:"64px"}}),a("div",{staticClass:"text-h6"},[t._v("Sin ventas registradas")]),a("div",{staticClass:"text-caption"},[t._v("Selecciona un rango de fechas")])],1),a("q-dialog",{attrs:{maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.m_produtos,callback:function(a){t.m_produtos=a},expression:"m_produtos"}},[a("q-card",{staticClass:"bg-grey-1"},[a("q-toolbar",{staticClass:"bg-white text-primary shadow-1"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}}),a("q-toolbar-title",{staticClass:"text-weight-bold"},[t._v("Detalle de Venta")])],1),a("q-card-section",{staticClass:"q-pa-md"},[a("q-list",{staticClass:"bg-white rounded-card shadow-1",attrs:{separator:""}},[t._l(t.productos,(function(e,o){return a("q-item",{key:o,staticClass:"q-py-md"},[a("q-item-section",[a("q-item-label",{staticClass:"text-weight-bold"},[t._v(t._s(e.producto))]),a("q-item-label",{attrs:{caption:""}},[t._v("Cant: "+t._s(e.cantidad))])],1),a("q-item-section",{staticClass:"text-right",attrs:{side:""}},[a("q-item-label",{staticClass:"text-primary text-weight-bold"},[t._v("\n                Bs "+t._s(t.formatMoney(e.valor_bs||0))+"\n              ")]),a("q-item-label",{staticClass:"text-positive text-weight-bold",attrs:{caption:""}},[t._v("\n                Ganancia: Bs "+t._s(t.formatMoney((e.valor_bs||0)-(e.costo_total_bs||0)))+"\n              ")])],1)],1)})),a("q-item",{staticClass:"bg-grey-2"},[a("q-item-section",[a("q-item-label",{staticClass:"text-weight-bold"},[t._v("TOTAL")])],1),a("q-item-section",{staticClass:"text-right",attrs:{side:""}},[a("q-item-label",{staticClass:"text-h6 text-primary text-weight-bold"},[t._v("\n                Bs "+t._s(t.formatMoney(t.totalVenta))+"\n              ")]),a("q-item-label",{staticClass:"text-positive text-weight-bold",attrs:{caption:""}},[t._v("\n                Ganancia Total: Bs "+t._s(t.formatMoney(t.totalGanancia))+"\n              ")])],1)],1)],2)],1)],1)],1)],1)},s=[],i=e("404a"),r=e("ed9b1"),n={name:"PageVentas",data(){return{inicio:null,fin:null,ventas:[],form:new r["a"],total:0,cantidad:null,producto:null,options:[],stringOptions:[],m_produtos:!1,productos:null,url_whatsapp:""}},mounted(){},computed:{totalVenta(){return this.productos?this.productos.reduce(((t,a)=>t+(a.valor_bs||0)),0):0},totalCosto(){return this.productos?this.productos.reduce(((t,a)=>t+(a.costo_total_bs||0)),0):0},totalGanancia(){return this.totalVenta-this.totalCosto}},methods:{formatMoney(t){return new Intl.NumberFormat("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)},calcularGanancia(t){const a=t.valor_bs||0,e=t.costo_total_bs||0;return a-e},async getVentas(){await i["a"].getInstance().get(this.inicio,this.fin).then((t=>this.ventas=t));let t=0;for(let s=0;s<this.ventas.length;s++)t+=this.ventas[s].total;this.total=t;const a=this.formatMoney(this.total),e=`El total del sus ventas es de *Bs ${a}*`,o=`https://api.whatsapp.com/send?text=${encodeURIComponent(e)}`;this.url_whatsapp=o},eliminarProductoLista(t){this.$q.dialog({title:"¿Desea borrar este registro?",message:'<strong class="text-red">¡Los cambios no podrán deshacerse!</strong>',html:!0,cancel:!0,persistent:!0}).onOk((()=>{this.$q.loading.show(),i["a"].getInstance().delete(t).then((async()=>{await this.getVentas(),this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"¡Datos eliminados!"})}))}))},modalProductos(t){this.m_produtos=!0,this.productos=t}}},c=n,d=e("2877"),l=e("9989"),u=e("f09f"),p=e("a370"),_=e("27f9"),m=e("0016"),v=e("7cbe"),h=e("52ee"),b=e("9c40"),f=e("66e5"),g=e("4074"),q=e("cb32"),x=e("0170"),C=e("24e8"),w=e("65c6"),y=e("6ac5"),k=e("1c1c"),j=e("7f67"),Q=e("eebe"),D=e.n(Q),I=Object(d["a"])(c,o,s,!1,null,null,null);a["default"]=I.exports;D()(I,"components",{QPage:l["a"],QCard:u["a"],QCardSection:p["a"],QInput:_["a"],QIcon:m["a"],QPopupProxy:v["a"],QDate:h["a"],QBtn:b["a"],QItem:f["a"],QItemSection:g["a"],QAvatar:q["a"],QItemLabel:x["a"],QDialog:C["a"],QToolbar:w["a"],QToolbarTitle:y["a"],QList:k["a"]}),D()(I,"directives",{ClosePopup:j["a"]})},abab:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));class o{constructor(){this.cedula="",this.nombre="",this.telefono="",this.create_at=null,this.update_at=null}}},c056:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));class o{constructor(){this.valor_dolar=null,this.create_at=null}}},dc98:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));class o{constructor(){this.producto_id=null,this.tipo="",this.cantidad=0,this.fecha=null,this.referencia="",this.create_at=null}}},ed9b1:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));class o{constructor(){this.total=0,this.productos=[],this.metodo_pago="",this.numero_factura=0,this.cliente_id=null,this.cliente_nombre=null,this.estado="PAGADO",this.create_at=null}}}}]);