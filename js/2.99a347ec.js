(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"404a":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var o=a("4204");a("bd4c");class r{static getInstance(){return new r}get(t,e){return o["a"].ventas.where("create_at").between(t,e).toArray()}save(t){return o["a"].ventas.add(t)}getOne(t){return o["a"].ventas.get({id:t})}delete(t){return o["a"].ventas.delete(t)}getNombre(t){return o["a"].ventas.get({nombre:t})}}},4204:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var o=a("4dec"),r=a("c056");const n=new o["a"]("BODEGUITA");n.version(1).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at",ventas:"++id, total, *productos, create_at, update_at"}),n.open().catch((function(t){console.error("Failed to open db: "+(t.stack||t))})),n.valores_dolar.mapToClass(r["a"])},"45e8":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var o=a("4204");a("bd4c");class r{static getInstance(){return new r}get(){return o["a"].productos.toArray()}save(t){return o["a"].productos.add(t)}getOne(t){return o["a"].productos.get({id:t})}delete(t){return o["a"].productos.delete(t)}getNombre(t){return o["a"].productos.get({nombre:t})}}},"8b24":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"bg-grey-3 q-pa-md",attrs:{padding:""}},[a("div",{staticClass:"row"},[a("q-select",{staticClass:"col q-mr-sm",staticStyle:{width:"250px","padding-bottom":"32px"},attrs:{label:"Producto",color:"teal",filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.options},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n            Sin resultados\n          ")])],1)]},proxy:!0}]),model:{value:t.producto,callback:function(e){t.producto=e},expression:"producto"}}),a("q-input",{staticClass:"col",attrs:{color:"teal",filled:"",label:"Cantidad"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"add_shopping_cart",color:"teal"},on:{click:t.agregarListaCompra}})]},proxy:!0}]),model:{value:t.cantidad,callback:function(e){t.cantidad=e},expression:"cantidad"}})],1),a("div",{staticClass:"row"},[a("q-banner",{staticClass:"col text-white bg-red",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"action",fn:function(){return[a("q-btn",{attrs:{flat:"",color:"white",label:"Pagar"},on:{click:t.save}})]},proxy:!0}])},[t._v("\n    Bs "+t._s(new Intl.NumberFormat("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t.total))+"\n    ")])],1),a("q-list",{staticClass:"bg-white",attrs:{bordered:"",padding:""}},[a("q-item-label",{attrs:{header:""}},[t._v("Listado")]),t._l(t.lista_compras,(function(e,o){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:o},[a("q-item-section",{attrs:{side:""}},[t._v("\n        "+t._s(new Intl.NumberFormat("es-VE",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e.valor_bs))+"\n      ")]),a("q-item-section",[a("q-item-label",[t._v(t._s(e.cantidad))])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.producto))])],1),a("q-item-section",{attrs:{side:""}},[a("q-btn",{attrs:{flat:"",round:"",color:"negative",icon:"delete"},on:{click:function(e){return t.eliminarProductoLista(o)}}},[a("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate"}},[t._v("\n              Eliminar registro selecionado\n            ")])],1)],1)],1)}))],2)],1)},r=[],n=a("bd4c"),s=a("45e8"),i=a("e633"),l=a("404a"),c=a("ed9b1"),d={name:"PageIndex",data(){return{valor_dolar:null,lista_compras:[],form:new c["a"],total:0,cantidad:null,producto:null,options:[],stringOptions:[]}},computed:{hoyDate(){let t=Date.now();return n["b"].formatDate(t,"dddd D MMMM hh:mm A")},fechaCreacion(){let t=Date.now();return n["b"].formatDate(t,"YYYY/MM/DD HH:mm:ss")}},mounted(){this.getProdutos(),this.getDolar()},methods:{getProdutos(){s["a"].getInstance().get().then((t=>{t.forEach((t=>this.stringOptions.push(t.nombre)))}))},getDolar(){i["a"].getInstance().getUltimo().then((t=>{this.valor_dolar=t.valor_dolar}))},agregarListaCompra(){let t=this.producto;this.$q.loading.show(),s["a"].getInstance().getNombre(t).then((t=>{this.$q.loading.hide();let e=Number(t.valor)*Number(this.valor_dolar)*Number(this.cantidad);this.lista_compras.push({producto:t.nombre,valor_bs:e,cantidad:this.cantidad,valor_dolar:this.valor_dolar}),this.total=this.total+e,this.producto=null}))},save(){this.$q.loading.show(),this.form.create_at=this.fechaCreacion,this.form.total=this.total,this.form.productos=this.lista_compras,l["a"].getInstance().save(this.form).then((()=>{this.form=new c["a"],this.lista_compras=[],this.total=0,this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"Datos guardados."})})).catch((function(t){console.error(`Error: ${t.stack}`),this.$q.notify({position:"top",type:"negative",message:`Error: ${t.stack}`})}))},eliminarProductoLista(t){console.log(t);let e=this.lista_compras[t];this.lista_compras.splice(t,1),this.total=this.total-e.valor_bs},filterFn(t,e,a){t.length<2?a():e((()=>{const e=t.toLowerCase();this.options=this.stringOptions.filter((t=>t.toLowerCase().indexOf(e)>-1))}))}}},u=d,p=a("2877"),m=a("9989"),h=a("ddd8"),g=a("66e5"),f=a("4074"),v=a("27f9"),_=a("0016"),b=a("54e1"),w=a("9c40"),q=a("1c1c"),y=a("0170"),C=a("05c0"),D=a("714f"),I=a("eebe"),k=a.n(I),x=Object(p["a"])(u,o,r,!1,null,null,null);e["default"]=x.exports;k()(x,"components",{QPage:m["a"],QSelect:h["a"],QItem:g["a"],QItemSection:f["a"],QInput:v["a"],QIcon:_["a"],QBanner:b["a"],QBtn:w["a"],QList:q["a"],QItemLabel:y["a"],QTooltip:C["a"]}),k()(x,"directives",{Ripple:D["a"]})},c056:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));class o{}},e633:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("26e9");var o=a("4204");a("bd4c");class r{static getInstance(){return new r}get(){return o["a"].valores_dolar.toArray()}save(t){return o["a"].valores_dolar.add(t)}getOne(t){return o["a"].valores_dolar.get({id:t})}delete(t){return o["a"].valores_dolar.delete(t)}getUltimo(){return o["a"].valores_dolar.orderBy("create_at").reverse().limit(1).first()}}},ed9b1:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));class o{}}}]);