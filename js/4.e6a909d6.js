(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{4204:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var r=e("4dec"),o=e("c056");const i=new r["a"]("BODEGUITA");i.version(1).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at",ventas:"++id, total, *productos, create_at, update_at"}),i.version(2).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad"}),i.open().catch((function(t){console.error("Fallo al abrir la base de datos: "+(t.stack||t))})),i.valores_dolar.mapToClass(o["a"])},"45e8":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));var r=e("4204");e("bd4c");class o{static getInstance(){return new o}get(){return r["a"].productos.toArray()}save(t){return r["a"].productos.add(t)}update(t,a){return r["a"].productos.update(t,a)}getOne(t){return r["a"].productos.get({id:t})}delete(t){return r["a"].productos.delete(t)}getNombre(t){return r["a"].productos.get({nombre:t})}}},"4ddb":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("q-page",{staticClass:"bg-grey-3 q-pa-md",attrs:{padding:""}},[a("div",{staticClass:"row q-mb-md"},[a("q-btn",{staticClass:"col",attrs:{color:"primary",icon:"create",label:"nuevo producto"},on:{click:t.dialogoNuevoValor}})],1),a("q-table",{attrs:{title:"Productos",data:t.data,columns:t.columns,filter:t.filter,"no-data-label":"No encontré nada para ti","no-results-label":"El filtro no reveló ningún resultado.","row-key":"nombre"},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"nombre",attrs:{props:e}},[t._v("\n          "+t._s(e.row.nombre)+"\n        ")]),a("q-td",{key:"valor",attrs:{props:e}},[t._v("\n            "+t._s(e.row.valor)+"\n        ")]),a("q-td",{key:"cantidad",attrs:{props:e}},[t._v("\n            "+t._s(e.row.cantidad)+"\n        ")]),a("q-td",{key:"create_at",attrs:{props:e}},[t._v("\n            "+t._s(t.hoyFecha(e.row.create_at))+"\n        ")]),a("q-td",{key:"id",attrs:{props:e}},[a("q-btn-group",[a("q-btn",{attrs:{flat:"",round:"",color:"info",icon:"add"},on:{click:function(a){return t.agregarCantidad(e.row)}}}),a("q-btn",{attrs:{flat:"",round:"",color:"warning",icon:"edit"},on:{click:function(a){return t.editarProducto(e.row)}}}),a("q-btn",{attrs:{flat:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return a.stopPropagation(),t.deleteR(e.row.id)}}})],1)],1)],1)]}},{key:"no-data",fn:function({icon:e,message:r,filter:o}){return[a("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v("\n          Bueno, esto es triste... "+t._s(r)+"\n        ")]),a("q-icon",{attrs:{size:"2em",name:o?"filter_b_and_w":e}})],1)]}}])}),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.m_nuevo_producto,callback:function(a){t.m_nuevo_producto=a},expression:"m_nuevo_producto"}},[a("q-card",[a("q-toolbar",[a("q-avatar",{attrs:{square:""}},[a("img",{attrs:{src:"icons/favicon-128x128.png"}})]),a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("Nuevo Producto")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.cerrar}})],1),a("q-card-section",[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{label:"Nombre"},model:{value:t.form.nombre,callback:function(a){t.$set(t.form,"nombre",a)},expression:"form.nombre"}}),a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Valor"},model:{value:t.form.valor,callback:function(a){t.$set(t.form,"valor",t._n(a))},expression:"form.valor"}}),a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Cantidad"},model:{value:t.form.cantidad,callback:function(a){t.$set(t.form,"cantidad",t._n(a))},expression:"form.cantidad"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.create_at,expression:"form.create_at"}],attrs:{type:"hidden"},domProps:{value:t.form.create_at},on:{input:function(a){a.target.composing||t.$set(t.form,"create_at",a.target.value)}}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Guardar"},on:{click:t.save}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.m_editar_producto,callback:function(a){t.m_editar_producto=a},expression:"m_editar_producto"}},[a("q-card",[a("q-toolbar",[a("q-avatar",{attrs:{square:""}},[a("img",{attrs:{src:"icons/favicon-128x128.png"}})]),a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("Editar Producto")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.cerrarEditar}})],1),a("q-card-section",[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{label:"Nombre"},model:{value:t.form_editar.nombre,callback:function(a){t.$set(t.form_editar,"nombre",a)},expression:"form_editar.nombre"}}),a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Valor"},model:{value:t.form_editar.valor,callback:function(a){t.$set(t.form_editar,"valor",t._n(a))},expression:"form_editar.valor"}}),a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Cantidad"},model:{value:t.form_editar.cantidad,callback:function(a){t.$set(t.form_editar,"cantidad",t._n(a))},expression:"form_editar.cantidad"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form_editar.create_at,expression:"form_editar.create_at"}],attrs:{type:"hidden"},domProps:{value:t.form_editar.create_at},on:{input:function(a){a.target.composing||t.$set(t.form_editar,"create_at",a.target.value)}}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Guardar"},on:{click:function(a){return t.actualizarProducto(t.form_editar.id)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.m_cantidad_producto,callback:function(a){t.m_cantidad_producto=a},expression:"m_cantidad_producto"}},[a("q-card",[a("q-toolbar",[a("q-avatar",{attrs:{square:""}},[a("img",{attrs:{src:"icons/favicon-128x128.png"}})]),a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v(t._s(t.form_cantidad.nombre))])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.cerrarCantidad}})],1),a("q-card-section",[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Cantidad Actual",readonly:""},model:{value:t.form_cantidad.cantidad,callback:function(a){t.$set(t.form_cantidad,"cantidad",t._n(a))},expression:"form_cantidad.cantidad"}}),a("q-input",{attrs:{type:"number",mask:"#.##","fill-mask":"0","reverse-fill-mask":"","input-class":"text-right",label:"Cantidad a agregar"},model:{value:t.cantidad_agregar,callback:function(a){t.cantidad_agregar=t._n(a)},expression:"cantidad_agregar"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form_cantidad.create_at,expression:"form_cantidad.create_at"}],attrs:{type:"hidden"},domProps:{value:t.form_cantidad.create_at},on:{input:function(a){a.target.composing||t.$set(t.form_cantidad,"create_at",a.target.value)}}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",color:"primary",label:"Guardar"},on:{click:function(a){return t.actualizarCantidad(t.form_cantidad.id)}}})],1)],1)],1)],1)},o=[],i=e("bd4c"),n=e("45e8");class s{}var d={name:"Productos",data(){return{form:new s,form_editar:{},form_cantidad:{},cantidad_agregar:null,m_nuevo_producto:!1,m_editar_producto:!1,m_cantidad_producto:!1,data:[],filter:"",columns:[{name:"nombre",required:!0,label:"Nombre",align:"center",field:t=>t.nombre,sortable:!0},{name:"valor",required:!0,label:"Valor",align:"center",field:t=>t.valor,format:t=>`${new Intl.NumberFormat("es-VE").format(t)}`,sortable:!0},{name:"cantidad",required:!0,label:"Cantidad",align:"center",field:t=>t.cantidad,format:t=>`${new Intl.NumberFormat("es-VE").format(t)}`,sortable:!0},{name:"create_at",align:"center",label:"Fecha",field:"create_at",sortable:!0,format:t=>`${this.hoyFecha(t)}`},{name:"id",align:"left",label:"Acciones",field:"id",sortable:!1}]}},mounted(){this.get()},computed:{hoyDate(){let t=Date.now();return i["b"].formatDate(t,"dddd D MMMM hh:mm A")},fechaCreacion(){let t=Date.now();return i["b"].formatDate(t,"YYYY/MM/DD HH:mm:ss")}},methods:{hoyFecha(t){return i["b"].formatDate(t,"DD-MM-YYYY HH:mm:ss")},dialogoNuevoValor(){this.m_nuevo_producto=!0},cerrar(){this.form=new s,this.m_nuevo_producto=!1},cerrarEditar(){this.form_editar={},this.m_editar_producto=!1},cerrarCantidad(){this.form_cantidad={},this.m_cantidad_producto=!1,this.cantidad_agregar=null},async get(){this.$q.loading.show(),await n["a"].getInstance().get().then((t=>{this.data=t})),this.$q.loading.hide()},save(){this.$q.loading.show(),this.form.create_at=this.fechaCreacion,this.form.valor=parseFloat(this.form.valor),this.form.cantidad=parseFloat(this.form.cantidad),this.form.nombre=this.form.nombre.toUpperCase(),n["a"].getInstance().save(this.form).then((()=>{this.m_nuevo_producto=!1,this.form=new s,this.get(),this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"Datos guardados."})})).catch((function(t){console.error(`Error: ${t.stack}`),this.$q.notify({position:"top",type:"negative",message:`Error: ${t.stack}`})}))},editarProducto(t){this.form_editar=t,this.m_editar_producto=!0},async actualizarProducto(t){this.$q.loading.show(),this.form_editar.create_at=this.fechaCreacion,this.form_editar.valor=parseFloat(this.form_editar.valor),this.form_editar.cantidad=parseFloat(this.form_editar.cantidad),this.form_editar.nombre=this.form_editar.nombre.toUpperCase(),await n["a"].getInstance().update(t,this.form_editar).then((()=>{this.form_editar={},this.m_editar_producto=!1,this.get(),this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"Datos actualizados."})})).catch((function(t){console.error(`Error: ${t.stack}`),this.$q.notify({position:"top",type:"negative",message:`Error: ${t.stack}`})}))},agregarCantidad(t){this.m_cantidad_producto=!0,this.form_cantidad=t},async actualizarCantidad(t){this.$q.loading.show(),this.form_cantidad.create_at=this.fechaCreacion,this.form_cantidad.cantidad=this.form_cantidad.cantidad+parseFloat(this.cantidad_agregar),await n["a"].getInstance().update(t,this.form_cantidad).then((()=>{this.form_cantidad={},this.cantidad_agregar=null,this.m_cantidad_producto=!1,this.get(),this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"Cantidad agregada."})})).catch((function(t){console.error(`Error: ${t.stack}`),this.$q.notify({position:"top",type:"negative",message:`Error: ${t.stack}`})}))},deleteR(t){t?this.$q.dialog({title:"¿Desea borrar este registro?",message:'<strong class="text-red">¡Los cambios no podrán deshacerse!</strong>',html:!0,cancel:!0,persistent:!0}).onOk((()=>{this.$q.loading.show(),n["a"].getInstance().delete(t).then((()=>{this.get(),this.$q.loading.hide(),this.$q.notify({position:"top",type:"positive",message:"¡Datos eliminados!"})}))})).onCancel((()=>{})):this.$q.notify({position:"top",type:"warning",message:"¡Selecione un registro!"})}}},c=d,l=e("2877"),m=e("9989"),u=e("9c40"),p=e("eaac"),f=e("27f9"),_=e("0016"),h=e("bd08"),g=e("db86"),b=e("e7a9"),v=e("24e8"),q=e("f09f"),k=e("65c6"),y=e("cb32"),w=e("6ac5"),$=e("a370"),C=e("eb85"),x=e("4b7e"),D=e("eebe"),Q=e.n(D),E=Object(l["a"])(c,r,o,!1,null,null,null);a["default"]=E.exports;Q()(E,"components",{QPage:m["a"],QBtn:u["a"],QTable:p["a"],QInput:f["a"],QIcon:_["a"],QTr:h["a"],QTd:g["a"],QBtnGroup:b["a"],QDialog:v["a"],QCard:q["a"],QToolbar:k["a"],QAvatar:y["a"],QToolbarTitle:w["a"],QCardSection:$["a"],QSeparator:C["a"],QCardActions:x["a"]})},c056:function(t,a,e){"use strict";e.d(a,"a",(function(){return r}));class r{}}}]);