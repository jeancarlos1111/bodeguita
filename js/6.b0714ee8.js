(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{4204:function(a,t,e){"use strict";e.d(t,"a",(function(){return c}));var o=e("4dec"),i=e("c056"),s=e("dc98"),r=e("abab");const c=new o["a"]("BODEGUITA");c.version(1).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at",ventas:"++id, total, *productos, create_at, update_at"}),c.version(2).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad"}),c.version(3).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia"}),c.version(4).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo"}),c.version(5).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva"}),c.version(6).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),c.version(7).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),c.version(8).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value"}),c.version(9).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),c.version(10).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),c.version(11).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado, monto_exento, monto_base, monto_iva, tasa_iva, monto_igtf, tasa_dolar, monto_dolar",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),c.open().catch((function(a){console.error("Fallo al abrir la base de datos: "+(a.stack||a))})),c.valores_dolar.mapToClass(i["a"]),c.movimientos.mapToClass(s["a"]),c.clientes.mapToClass(r["a"])},"5ddd":function(a,t,e){},"69c5":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a._self._c;return t("q-page",{staticClass:"q-pa-md bg-grey-1"},[t("div",{staticClass:"text-h5 text-primary text-weight-bold q-mb-md"},[a._v("Configuración")]),t("div",{staticClass:"row q-col-gutter-md"},[t("div",{staticClass:"col-12 col-md-6"},[t("q-card",{staticClass:"rounded-card shadow-1"},[t("q-card-section",[t("div",{staticClass:"text-subtitle1 text-weight-bold q-mb-sm"},[a._v("Datos del Negocio")]),t("div",{staticClass:"text-caption text-grey q-mb-md"},[a._v("Información que aparecerá en el Reporte Z y Facturas\n                    ")]),t("q-form",{staticClass:"q-gutter-y-md",on:{submit:a.saveBusinessData}},[t("q-input",{attrs:{filled:"",label:"Nombre del Negocio",rules:[a=>!!a||"Requerido"]},model:{value:a.negocio.nombre,callback:function(t){a.$set(a.negocio,"nombre",t)},expression:"negocio.nombre"}}),t("q-input",{attrs:{filled:"",label:"RIF / NIT",rules:[a=>!!a||"Requerido"],mask:"A-###########","unmasked-value":""},model:{value:a.negocio.rif,callback:function(t){a.$set(a.negocio,"rif",t)},expression:"negocio.rif"}}),t("q-input",{attrs:{filled:"",label:"Dirección Fiscal",type:"textarea",rows:"3"},model:{value:a.negocio.direccion,callback:function(t){a.$set(a.negocio,"direccion",t)},expression:"negocio.direccion"}}),t("div",{staticClass:"text-right"},[t("q-btn",{attrs:{label:"Guardar Datos",type:"submit",color:"primary",unelevated:"",loading:a.loading}})],1)],1)],1)],1)],1),t("div",{staticClass:"col-12 col-md-6"},[t("q-card",{staticClass:"rounded-card shadow-1 q-mb-md"},[t("q-card-section",[t("div",{staticClass:"row items-center justify-between"},[t("div",{staticClass:"text-subtitle1 text-weight-bold"},[a._v("Secuencia de Facturación")]),a.secuenciaBloqueada?t("q-icon",{attrs:{name:"lock",color:"negative",size:"sm"}},[t("q-tooltip",[a._v("Secuencia Bloqueada")])],1):a._e()],1),t("div",{staticClass:"text-caption text-grey q-mb-md"},[a._v("\n                        Establece el número inicial del talonario. "),t("br"),a.secuenciaBloqueada?t("span",{staticClass:"text-positive"},[a._v("La secuencia está activa y segura.")]):t("span",{staticClass:"text-negative text-weight-bold"},[a._v("¡ATENCIÓN! Una vez\n                            guardado, no se podrá modificar.")])]),t("q-form",{staticClass:"q-gutter-y-md",on:{submit:a.saveSequence}},[t("q-input",{attrs:{filled:"",type:"number",label:"Número Actual / Inicial",disable:a.secuenciaBloqueada,rules:[a=>a>0||"Debe ser mayor a 0",a=>Number.isInteger(a)||"Debe ser entero"]},model:{value:a.secuencia,callback:function(t){a.secuencia=a._n(t)},expression:"secuencia"}}),a.secuenciaBloqueada?a._e():t("div",{staticClass:"text-right"},[t("q-btn",{attrs:{label:"Establecer y Bloquear",type:"submit",color:"negative",outline:"",loading:a.loading}})],1)],1)],1)],1),t("q-card",{staticClass:"rounded-card shadow-1"},[t("q-card-section",[t("div",{staticClass:"text-subtitle1 text-weight-bold"},[a._v("Tributos e Impuestos")]),t("div",{staticClass:"text-caption text-grey q-mb-md"},[a._v("\n                        Configura si deseas desglosar impuestos en las ventas.\n                    ")]),t("q-list",[t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[t("q-item-section",[t("q-item-label",[a._v("Cobrar IVA")]),t("q-item-label",{attrs:{caption:""}},[a._v("Calcula y desglosa el impuesto en cada venta")])],1),t("q-item-section",{attrs:{side:""}},[t("q-toggle",{attrs:{color:"primary"},on:{input:a.saveTributos},model:{value:a.tributos.cobrar_iva,callback:function(t){a.$set(a.tributos,"cobrar_iva",t)},expression:"tributos.cobrar_iva"}})],1)],1),t("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[t("q-item-section",[t("q-item-label",[a._v("Cobrar IGTF (3%)")]),t("q-item-label",{attrs:{caption:""}},[a._v("Aplica recargo a pagos en divisas")])],1),t("q-item-section",{attrs:{side:""}},[t("q-toggle",{attrs:{color:"primary"},on:{input:a.saveTributos},model:{value:a.tributos.cobrar_igtf,callback:function(t){a.$set(a.tributos,"cobrar_igtf",t)},expression:"tributos.cobrar_igtf"}})],1)],1)],1)],1)],1)],1)])])},i=[],s=e("dc92"),r={name:"Configuracion",data(){return{negocio:{nombre:"",rif:"",direccion:""},secuencia:null,secuenciaBloqueada:!1,loading:!1,tributos:{cobrar_iva:!1,cobrar_igtf:!1}}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0;try{const a=await s["a"].getInstance().get("datos_negocio");a&&(this.negocio={...a});const t=await s["a"].getInstance().get("secuencia_factura");t&&(this.secuencia=t);const e=await s["a"].getInstance().get("secuencia_bloqueada");this.secuenciaBloqueada=!!e;const o=await s["a"].getInstance().get("tributos");o&&(this.tributos={...o})}catch(a){console.error(a),this.$q.notify({type:"negative",message:"Error cargando configuración"})}finally{this.loading=!1}},async saveBusinessData(){this.loading=!0;try{await s["a"].getInstance().save("datos_negocio",this.negocio),this.$q.notify({type:"positive",message:"Datos del negocio guardados"})}catch(a){this.$q.notify({type:"negative",message:"Error guardando datos"})}finally{this.loading=!1}},saveSequence(){this.$q.dialog({title:"Confirmar Seguridad",message:"¿Estás seguro de establecer este número? <b>No podrás editarlo después</b> para garantizar la consecutividad.",html:!0,cancel:!0,persistent:!0}).onOk((async()=>{this.loading=!0;try{await s["a"].getInstance().save("secuencia_factura",Number(this.secuencia)),await s["a"].getInstance().save("secuencia_bloqueada",!0),this.secuenciaBloqueada=!0,this.$q.notify({type:"positive",message:"Secuencia establecida correctamente"})}catch(a){this.$q.notify({type:"negative",message:"Error guardando secuencia"})}finally{this.loading=!1}}))},async saveTributos(){try{await s["a"].getInstance().save("tributos",this.tributos),this.$q.notify({type:"positive",message:"Configuración de tributos actualizada",timeout:1e3})}catch(a){console.error(a),this.$q.notify({type:"negative",message:"Error guardando tributos"})}}}},c=r,n=(e("7a69"),e("2877")),d=e("9989"),l=e("f09f"),u=e("a370"),p=e("0378"),_=e("27f9"),v=e("9c40"),m=e("0016"),g=e("05c0"),b=e("1c1c"),f=e("66e5"),h=e("4074"),q=e("0170"),y=e("9564"),C=e("714f"),w=e("eebe"),x=e.n(w),I=Object(n["a"])(c,o,i,!1,null,"4cb2181f",null);t["default"]=I.exports;x()(I,"components",{QPage:d["a"],QCard:l["a"],QCardSection:u["a"],QForm:p["a"],QInput:_["a"],QBtn:v["a"],QIcon:m["a"],QTooltip:g["a"],QList:b["a"],QItem:f["a"],QItemSection:h["a"],QItemLabel:q["a"],QToggle:y["a"]}),x()(I,"directives",{Ripple:C["a"]})},"7a69":function(a,t,e){"use strict";e("5ddd")},abab:function(a,t,e){"use strict";e.d(t,"a",(function(){return o}));class o{constructor(){this.cedula="",this.nombre="",this.telefono="",this.create_at=null,this.update_at=null}}},c056:function(a,t,e){"use strict";e.d(t,"a",(function(){return o}));class o{constructor(){this.valor_dolar=null,this.create_at=null}}},dc92:function(a,t,e){"use strict";e.d(t,"a",(function(){return i}));var o=e("4204");class i{static getInstance(){return new i}async get(a){const t=await o["a"].configuracion.get(a);return t?t.value:null}async save(a,t){return o["a"].configuracion.put({key:a,value:t})}}},dc98:function(a,t,e){"use strict";e.d(t,"a",(function(){return o}));class o{constructor(){this.producto_id=null,this.tipo="",this.cantidad=0,this.fecha=null,this.referencia="",this.create_at=null}}}}]);