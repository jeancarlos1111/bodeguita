(function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/bodeguita/",n(n.s="bec6")})({"00ee":function(t,e,n){var r=n("b622"),o=r("toStringTag"),i={};i[o]="z",t.exports="[object z]"===String(i)},"0366":function(t,e,n){var r=n("4625"),o=n("59ed"),i=n("40d5"),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},"04d1":function(t,e,n){var r=n("342f"),o=r.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},"04f8":function(t,e,n){var r=n("2d00"),o=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},"06cf":function(t,e,n){var r=n("83ab"),o=n("c65b"),i=n("d1e7"),a=n("5c6c"),u=n("fc6a"),s=n("a04b"),c=n("1a2d"),f=n("0cfb"),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=u(t),e=s(e),f)try{return l(t,e)}catch(n){}if(c(t,e))return a(!o(i.f,t,e),t[e])}},"07fa":function(t,e,n){var r=n("50c4");t.exports=function(t){return r(t.length)}},"0b25":function(t,e,n){var r=n("5926"),o=n("50c4"),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=o(e);if(e!==n)throw i("Wrong length or index");return n}},"0b42":function(t,e,n){var r=n("e8b5"),o=n("68ee"),i=n("861d"),a=n("b622"),u=a("species"),s=Array;t.exports=function(t){var e;return r(t)&&(e=t.constructor,o(e)&&(e===s||r(e.prototype))?e=void 0:i(e)&&(e=e[u],null===e&&(e=void 0))),void 0===e?s:e}},"0cfb":function(t,e,n){var r=n("83ab"),o=n("d039"),i=n("cc12");t.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"0d51":function(t,e){var n=String;t.exports=function(t){try{return n(t)}catch(e){return"Object"}}},"13d2":function(t,e,n){var r=n("e330"),o=n("d039"),i=n("1626"),a=n("1a2d"),u=n("83ab"),s=n("5e77").CONFIGURABLE,c=n("8925"),f=n("69f3"),l=f.enforce,h=f.get,d=String,p=Object.defineProperty,v=r("".slice),y=r("".replace),b=r([].join),g=u&&!o((function(){return 8!==p((function(){}),"length",{value:8}).length})),m=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===v(d(e),0,7)&&(e="["+y(d(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!a(t,"name")||s&&t.name!==e)&&(u?p(t,"name",{value:e,configurable:!0}):t.name=e),g&&n&&a(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?u&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(o){}var r=l(t);return a(r,"source")||(r.source=b(m,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return i(this)&&h(this).source||c(this)}),"toString")},1626:function(t,e,n){var r=n("8ea1"),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},"182d":function(t,e,n){var r=n("f8cd"),o=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw o("Wrong offset");return n}},"19aa":function(t,e,n){var r=n("3a9b"),o=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw o("Incorrect invocation")}},"1a2d":function(t,e,n){var r=n("e330"),o=n("7b0b"),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c7e":function(t,e,n){var r=n("b622"),o=r("iterator"),i=!1;try{var a=0,u={next:function(){return{done:!!a++}},return:function(){i=!0}};u[o]=function(){return this},Array.from(u,(function(){throw 2}))}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var r={};r[o]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(s){}return n}},"1d02":function(t,e,n){"use strict";var r=n("ebb5"),o=n("a258").findLastIndex,i=r.aTypedArray,a=r.exportTypedArrayMethod;a("findLastIndex",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},"1d80":function(t,e,n){var r=n("7234"),o=TypeError;t.exports=function(t){if(r(t))throw o("Can't call method on "+t);return t}},"219c":function(t,e,n){"use strict";var r=n("da84"),o=n("4625"),i=n("d039"),a=n("59ed"),u=n("addb"),s=n("ebb5"),c=n("04d1"),f=n("d998"),l=n("2d00"),h=n("512c"),d=s.aTypedArray,p=s.exportTypedArrayMethod,v=r.Uint16Array,y=v&&o(v.prototype.sort),b=!!y&&!(i((function(){y(new v(2),null)}))&&i((function(){y(new v(2),{})}))),g=!!y&&!i((function(){if(l)return l<74;if(c)return c<67;if(f)return!0;if(h)return h<602;var t,e,n=new v(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(y(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0})),m=function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!==n?-1:e!==e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}};p("sort",(function(t){return void 0!==t&&a(t),g?y(this,t):u(d(this),m(t))}),!g||b)},"23cb":function(t,e,n){var r=n("5926"),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},"23e7":function(t,e,n){var r=n("da84"),o=n("06cf").f,i=n("9112"),a=n("cb2d"),u=n("6374"),s=n("e893"),c=n("94ca");t.exports=function(t,e){var n,f,l,h,d,p,v=t.target,y=t.global,b=t.stat;if(f=y?r:b?r[v]||u(v,{}):(r[v]||{}).prototype,f)for(l in e){if(d=e[l],t.dontCallGetSet?(p=o(f,l),h=p&&p.value):h=f[l],n=c(y?l:v+(b?".":"#")+l,t.forced),!n&&void 0!==h){if(typeof d==typeof h)continue;s(d,h)}(t.sham||h&&h.sham)&&i(d,"sham",!0),a(f,l,d,t)}}},"241c":function(t,e,n){var r=n("ca84"),o=n("7839"),i=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},2626:function(t,e,n){"use strict";var r=n("d066"),o=n("edd0"),i=n("b622"),a=n("83ab"),u=i("species");t.exports=function(t){var e=r(t);a&&e&&!e[u]&&o(e,u,{configurable:!0,get:function(){return this}})}},"2a62":function(t,e,n){var r=n("c65b"),o=n("825a"),i=n("dc4a");t.exports=function(t,e,n){var a,u;o(t);try{if(a=i(t,"return"),!a){if("throw"===e)throw n;return n}a=r(a,t)}catch(s){u=!0,a=s}if("throw"===e)throw n;if(u)throw a;return o(a),n}},"2b3d":function(t,e,n){n("4002")},"2d00":function(t,e,n){var r,o,i=n("da84"),a=n("342f"),u=i.process,s=i.Deno,c=u&&u.versions||s&&s.version,f=c&&c.v8;f&&(r=f.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),t.exports=o},"342f":function(t,e){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},"35a1":function(t,e,n){var r=n("f5df"),o=n("dc4a"),i=n("7234"),a=n("3f8c"),u=n("b622"),s=u("iterator");t.exports=function(t){if(!i(t))return o(t,s)||o(t,"@@iterator")||a[r(t)]}},"37e8":function(t,e,n){var r=n("83ab"),o=n("aed9"),i=n("9bf2"),a=n("825a"),u=n("fc6a"),s=n("df75");e.f=r&&!o?Object.defineProperties:function(t,e){a(t);var n,r=u(e),o=s(e),c=o.length,f=0;while(c>f)i.f(t,n=o[f++],r[n]);return t}},"3a9b":function(t,e,n){var r=n("e330");t.exports=r({}.isPrototypeOf)},"3bbe":function(t,e,n){var r=n("1626"),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw i("Can't set "+o(t)+" as a prototype")}},"3c5d":function(t,e,n){"use strict";var r=n("da84"),o=n("c65b"),i=n("ebb5"),a=n("07fa"),u=n("182d"),s=n("7b0b"),c=n("d039"),f=r.RangeError,l=r.Int8Array,h=l&&l.prototype,d=h&&h.set,p=i.aTypedArray,v=i.exportTypedArrayMethod,y=!c((function(){var t=new Uint8ClampedArray(2);return o(d,t,{length:1,0:3},1),3!==t[1]})),b=y&&i.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var t=new l(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){p(this);var e=u(arguments.length>1?arguments[1]:void 0,1),n=s(t);if(y)return o(d,this,n,e);var r=this.length,i=a(n),c=0;if(i+e>r)throw f("Wrong length");while(c<i)this[e+c]=n[c++]}),!y||b)},"3ca3":function(t,e,n){"use strict";var r=n("6547").charAt,o=n("577e"),i=n("69f3"),a=n("c6d2"),u=n("4754"),s="String Iterator",c=i.set,f=i.getterFor(s);a(String,"String",(function(t){c(this,{type:s,string:o(t),index:0})}),(function(){var t,e=f(this),n=e.string,o=e.index;return o>=n.length?u(void 0,!0):(t=r(n,o),e.index+=t.length,u(t,!1))}))},"3f8c":function(t,e){t.exports={}},4002:function(t,e,n){"use strict";n("3ca3");var r,o=n("23e7"),i=n("83ab"),a=n("f354"),u=n("da84"),s=n("0366"),c=n("e330"),f=n("cb2d"),l=n("edd0"),h=n("19aa"),d=n("1a2d"),p=n("60da"),v=n("4df4"),y=n("4dae"),b=n("6547").codeAt,g=n("5fb2"),m=n("577e"),w=n("d44e"),_=n("d6d6"),x=n("5352"),k=n("69f3"),A=k.set,S=k.getterFor("URL"),O=x.URLSearchParams,P=x.getState,E=u.URL,j=u.TypeError,T=u.parseInt,R=Math.floor,I=Math.pow,C=c("".charAt),B=c(/./.exec),D=c([].join),F=c(1..toString),M=c([].pop),L=c([].push),K=c("".replace),U=c([].shift),q=c("".split),N=c("".slice),W=c("".toLowerCase),H=c([].unshift),V="Invalid authority",z="Invalid scheme",G="Invalid host",Y="Invalid port",$=/[a-z]/i,Q=/[\d+-.a-z]/i,X=/\d/,J=/^0x/i,Z=/^[0-7]+$/,tt=/^\d+$/,et=/^[\da-f]+$/i,nt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,ot=/^[\u0000-\u0020]+/,it=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,at=/[\t\n\r]/g,ut=function(t){var e,n,r,o,i,a,u,s=q(t,".");if(s.length&&""==s[s.length-1]&&s.length--,e=s.length,e>4)return t;for(n=[],r=0;r<e;r++){if(o=s[r],""==o)return t;if(i=10,o.length>1&&"0"==C(o,0)&&(i=B(J,o)?16:8,o=N(o,8==i?1:2)),""===o)a=0;else{if(!B(10==i?tt:8==i?Z:et,o))return t;a=T(o,i)}L(n,a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=I(256,5-e))return null}else if(a>255)return null;for(u=M(n),r=0;r<n.length;r++)u+=n[r]*I(256,3-r);return u},st=function(t){var e,n,r,o,i,a,u,s=[0,0,0,0,0,0,0,0],c=0,f=null,l=0,h=function(){return C(t,l)};if(":"==h()){if(":"!=C(t,1))return;l+=2,c++,f=c}while(h()){if(8==c)return;if(":"!=h()){e=n=0;while(n<4&&B(et,h()))e=16*e+T(h(),16),l++,n++;if("."==h()){if(0==n)return;if(l-=n,c>6)return;r=0;while(h()){if(o=null,r>0){if(!("."==h()&&r<4))return;l++}if(!B(X,h()))return;while(B(X,h())){if(i=T(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;l++}s[c]=256*s[c]+o,r++,2!=r&&4!=r||c++}if(4!=r)return;break}if(":"==h()){if(l++,!h())return}else if(h())return;s[c++]=e}else{if(null!==f)return;l++,c++,f=c}}if(null!==f){a=c-f,c=7;while(0!=c&&a>0)u=s[c],s[c--]=s[f+a-1],s[f+--a]=u}else if(8!=c)return;return s},ct=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e},ft=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)H(e,t%256),t=R(t/256);return D(e,".")}if("object"==typeof t){for(e="",r=ct(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=F(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},lt={},ht=p({},lt,{" ":1,'"':1,"<":1,">":1,"`":1}),dt=p({},ht,{"#":1,"?":1,"{":1,"}":1}),pt=p({},dt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),vt=function(t,e){var n=b(t,0);return n>32&&n<127&&!d(e,t)?t:encodeURIComponent(t)},yt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},bt=function(t,e){var n;return 2==t.length&&B($,C(t,0))&&(":"==(n=C(t,1))||!e&&"|"==n)},gt=function(t){var e;return t.length>1&&bt(N(t,0,2))&&(2==t.length||"/"===(e=C(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===W(t)},wt=function(t){return t=W(t),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},_t={},xt={},kt={},At={},St={},Ot={},Pt={},Et={},jt={},Tt={},Rt={},It={},Ct={},Bt={},Dt={},Ft={},Mt={},Lt={},Kt={},Ut={},qt={},Nt=function(t,e,n){var r,o,i,a=m(t);if(e){if(o=this.parse(a),o)throw j(o);this.searchParams=null}else{if(void 0!==n&&(r=new Nt(n,!0)),o=this.parse(a,null,r),o)throw j(o);i=P(new O),i.bindURL(this),this.searchParams=i}};Nt.prototype={type:"URL",parse:function(t,e,n){var o,i,a,u,s=this,c=e||_t,f=0,l="",h=!1,p=!1,b=!1;t=m(t),e||(s.scheme="",s.username="",s.password="",s.host=null,s.port=null,s.path=[],s.query=null,s.fragment=null,s.cannotBeABaseURL=!1,t=K(t,ot,""),t=K(t,it,"$1")),t=K(t,at,""),o=v(t);while(f<=o.length){switch(i=o[f],c){case _t:if(!i||!B($,i)){if(e)return z;c=kt;continue}l+=W(i),c=xt;break;case xt:if(i&&(B(Q,i)||"+"==i||"-"==i||"."==i))l+=W(i);else{if(":"!=i){if(e)return z;l="",c=kt,f=0;continue}if(e&&(s.isSpecial()!=d(yt,l)||"file"==l&&(s.includesCredentials()||null!==s.port)||"file"==s.scheme&&!s.host))return;if(s.scheme=l,e)return void(s.isSpecial()&&yt[s.scheme]==s.port&&(s.port=null));l="","file"==s.scheme?c=Bt:s.isSpecial()&&n&&n.scheme==s.scheme?c=At:s.isSpecial()?c=Et:"/"==o[f+1]?(c=St,f++):(s.cannotBeABaseURL=!0,L(s.path,""),c=Kt)}break;case kt:if(!n||n.cannotBeABaseURL&&"#"!=i)return z;if(n.cannotBeABaseURL&&"#"==i){s.scheme=n.scheme,s.path=y(n.path),s.query=n.query,s.fragment="",s.cannotBeABaseURL=!0,c=qt;break}c="file"==n.scheme?Bt:Ot;continue;case At:if("/"!=i||"/"!=o[f+1]){c=Ot;continue}c=jt,f++;break;case St:if("/"==i){c=Tt;break}c=Lt;continue;case Ot:if(s.scheme=n.scheme,i==r)s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=y(n.path),s.query=n.query;else if("/"==i||"\\"==i&&s.isSpecial())c=Pt;else if("?"==i)s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=y(n.path),s.query="",c=Ut;else{if("#"!=i){s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=y(n.path),s.path.length--,c=Lt;continue}s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,s.path=y(n.path),s.query=n.query,s.fragment="",c=qt}break;case Pt:if(!s.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){s.username=n.username,s.password=n.password,s.host=n.host,s.port=n.port,c=Lt;continue}c=Tt}else c=jt;break;case Et:if(c=jt,"/"!=i||"/"!=C(l,f+1))continue;f++;break;case jt:if("/"!=i&&"\\"!=i){c=Tt;continue}break;case Tt:if("@"==i){h&&(l="%40"+l),h=!0,a=v(l);for(var g=0;g<a.length;g++){var w=a[g];if(":"!=w||b){var _=vt(w,pt);b?s.password+=_:s.username+=_}else b=!0}l=""}else if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(h&&""==l)return V;f-=v(l).length+1,l="",c=Rt}else l+=i;break;case Rt:case It:if(e&&"file"==s.scheme){c=Ft;continue}if(":"!=i||p){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()){if(s.isSpecial()&&""==l)return G;if(e&&""==l&&(s.includesCredentials()||null!==s.port))return;if(u=s.parseHost(l),u)return u;if(l="",c=Mt,e)return;continue}"["==i?p=!0:"]"==i&&(p=!1),l+=i}else{if(""==l)return G;if(u=s.parseHost(l),u)return u;if(l="",c=Ct,e==It)return}break;case Ct:if(!B(X,i)){if(i==r||"/"==i||"?"==i||"#"==i||"\\"==i&&s.isSpecial()||e){if(""!=l){var x=T(l,10);if(x>65535)return Y;s.port=s.isSpecial()&&x===yt[s.scheme]?null:x,l=""}if(e)return;c=Mt;continue}return Y}l+=i;break;case Bt:if(s.scheme="file","/"==i||"\\"==i)c=Dt;else{if(!n||"file"!=n.scheme){c=Lt;continue}if(i==r)s.host=n.host,s.path=y(n.path),s.query=n.query;else if("?"==i)s.host=n.host,s.path=y(n.path),s.query="",c=Ut;else{if("#"!=i){gt(D(y(o,f),""))||(s.host=n.host,s.path=y(n.path),s.shortenPath()),c=Lt;continue}s.host=n.host,s.path=y(n.path),s.query=n.query,s.fragment="",c=qt}}break;case Dt:if("/"==i||"\\"==i){c=Ft;break}n&&"file"==n.scheme&&!gt(D(y(o,f),""))&&(bt(n.path[0],!0)?L(s.path,n.path[0]):s.host=n.host),c=Lt;continue;case Ft:if(i==r||"/"==i||"\\"==i||"?"==i||"#"==i){if(!e&&bt(l))c=Lt;else if(""==l){if(s.host="",e)return;c=Mt}else{if(u=s.parseHost(l),u)return u;if("localhost"==s.host&&(s.host=""),e)return;l="",c=Mt}continue}l+=i;break;case Mt:if(s.isSpecial()){if(c=Lt,"/"!=i&&"\\"!=i)continue}else if(e||"?"!=i)if(e||"#"!=i){if(i!=r&&(c=Lt,"/"!=i))continue}else s.fragment="",c=qt;else s.query="",c=Ut;break;case Lt:if(i==r||"/"==i||"\\"==i&&s.isSpecial()||!e&&("?"==i||"#"==i)){if(wt(l)?(s.shortenPath(),"/"==i||"\\"==i&&s.isSpecial()||L(s.path,"")):mt(l)?"/"==i||"\\"==i&&s.isSpecial()||L(s.path,""):("file"==s.scheme&&!s.path.length&&bt(l)&&(s.host&&(s.host=""),l=C(l,0)+":"),L(s.path,l)),l="","file"==s.scheme&&(i==r||"?"==i||"#"==i))while(s.path.length>1&&""===s.path[0])U(s.path);"?"==i?(s.query="",c=Ut):"#"==i&&(s.fragment="",c=qt)}else l+=vt(i,dt);break;case Kt:"?"==i?(s.query="",c=Ut):"#"==i?(s.fragment="",c=qt):i!=r&&(s.path[0]+=vt(i,lt));break;case Ut:e||"#"!=i?i!=r&&("'"==i&&s.isSpecial()?s.query+="%27":s.query+="#"==i?"%23":vt(i,lt)):(s.fragment="",c=qt);break;case qt:i!=r&&(s.fragment+=vt(i,ht));break}f++}},parseHost:function(t){var e,n,r;if("["==C(t,0)){if("]"!=C(t,t.length-1))return G;if(e=st(N(t,1,-1)),!e)return G;this.host=e}else if(this.isSpecial()){if(t=g(t),B(nt,t))return G;if(e=ut(t),null===e)return G;this.host=e}else{if(B(rt,t))return G;for(e="",n=v(t),r=0;r<n.length;r++)e+=vt(n[r],lt);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return d(yt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"==this.scheme&&1==e&&bt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,u=t.query,s=t.fragment,c=e+":";return null!==o?(c+="//",t.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=ft(o),null!==i&&(c+=":"+i)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+D(a,"/"):"",null!==u&&(c+="?"+u),null!==s&&(c+="#"+s),c},setHref:function(t){var e=this.parse(t);if(e)throw j(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"==t)try{return new Wt(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&this.isSpecial()?t+"://"+ft(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(m(t)+":",_t)},getUsername:function(){return this.username},setUsername:function(t){var e=v(m(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=vt(e[n],pt)}},getPassword:function(){return this.password},setPassword:function(t){var e=v(m(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=vt(e[n],pt)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?ft(t):ft(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Rt)},getHostname:function(){var t=this.host;return null===t?"":ft(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,It)},getPort:function(){var t=this.port;return null===t?"":m(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=m(t),""==t?this.port=null:this.parse(t,Ct))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+D(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Mt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=m(t),""==t?this.query=null:("?"==C(t,0)&&(t=N(t,1)),this.query="",this.parse(t,Ut)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){t=m(t),""!=t?("#"==C(t,0)&&(t=N(t,1)),this.fragment="",this.parse(t,qt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Wt=function(t){var e=h(this,Ht),n=_(arguments.length,1)>1?arguments[1]:void 0,r=A(e,new Nt(t,!1,n));i||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Ht=Wt.prototype,Vt=function(t,e){return{get:function(){return S(this)[t]()},set:e&&function(t){return S(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&(l(Ht,"href",Vt("serialize","setHref")),l(Ht,"origin",Vt("getOrigin")),l(Ht,"protocol",Vt("getProtocol","setProtocol")),l(Ht,"username",Vt("getUsername","setUsername")),l(Ht,"password",Vt("getPassword","setPassword")),l(Ht,"host",Vt("getHost","setHost")),l(Ht,"hostname",Vt("getHostname","setHostname")),l(Ht,"port",Vt("getPort","setPort")),l(Ht,"pathname",Vt("getPathname","setPathname")),l(Ht,"search",Vt("getSearch","setSearch")),l(Ht,"searchParams",Vt("getSearchParams")),l(Ht,"hash",Vt("getHash","setHash"))),f(Ht,"toJSON",(function(){return S(this).serialize()}),{enumerable:!0}),f(Ht,"toString",(function(){return S(this).serialize()}),{enumerable:!0}),E){var zt=E.createObjectURL,Gt=E.revokeObjectURL;zt&&f(Wt,"createObjectURL",s(zt,E)),Gt&&f(Wt,"revokeObjectURL",s(Gt,E))}w(Wt,"URL"),o({global:!0,constructor:!0,forced:!a,sham:!i},{URL:Wt})},"40d5":function(t,e,n){var r=n("d039");t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},"44ad":function(t,e,n){var r=n("e330"),o=n("d039"),i=n("c6b6"),a=Object,u=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?u(t,""):a(t)}:a},"44d2":function(t,e,n){var r=n("b622"),o=n("7c73"),i=n("9bf2").f,a=r("unscopables"),u=Array.prototype;void 0==u[a]&&i(u,a,{configurable:!0,value:o(null)}),t.exports=function(t){u[a][t]=!0}},4625:function(t,e,n){var r=n("c6b6"),o=n("e330");t.exports=function(t){if("Function"===r(t))return o(t)}},4754:function(t,e){t.exports=function(t,e){return{value:t,done:e}}},"485a":function(t,e,n){var r=n("c65b"),o=n("1626"),i=n("861d"),a=TypeError;t.exports=function(t,e){var n,u;if("string"===e&&o(n=t.toString)&&!i(u=r(n,t)))return u;if(o(n=t.valueOf)&&!i(u=r(n,t)))return u;if("string"!==e&&o(n=t.toString)&&!i(u=r(n,t)))return u;throw a("Can't convert object to primitive value")}},"4b11":function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},"4d64":function(t,e,n){var r=n("fc6a"),o=n("23cb"),i=n("07fa"),a=function(t){return function(e,n,a){var u,s=r(e),c=i(s),f=o(a,c);if(t&&n!=n){while(c>f)if(u=s[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4dae":function(t,e,n){var r=n("23cb"),o=n("07fa"),i=n("8418"),a=Array,u=Math.max;t.exports=function(t,e,n){for(var s=o(t),c=r(e,s),f=r(void 0===n?s:n,s),l=a(u(f-c,0)),h=0;c<f;c++,h++)i(l,h,t[c]);return l.length=h,l}},"4dec":function(t,e,n){"use strict";(function(t){var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var o=Object.keys,i=Array.isArray,a="undefined"!==typeof self?self:"undefined"!==typeof window?window:t;function u(t,e){return"object"!==typeof e||o(e).forEach((function(n){t[n]=e[n]})),t}"undefined"===typeof Promise||a.Promise||(a.Promise=Promise);var s=Object.getPrototypeOf,c={}.hasOwnProperty;function f(t,e){return c.call(t,e)}function l(t,e){"function"===typeof e&&(e=e(s(t))),o(e).forEach((function(n){d(t,n,e[n])}))}var h=Object.defineProperty;function d(t,e,n,r){h(t,e,u(n&&f(n,"get")&&"function"===typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(t){return{from:function(e){return t.prototype=Object.create(e.prototype),d(t.prototype,"constructor",t),{extend:l.bind(null,t.prototype)}}}}var v=Object.getOwnPropertyDescriptor;function y(t,e){var n,r=v(t,e);return r||(n=s(t))&&y(n,e)}var b=[].slice;function g(t,e,n){return b.call(t,e,n)}function m(t,e){return e(t)}function w(t){if(!t)throw new Error("Assertion Failed")}function _(t){a.setImmediate?setImmediate(t):setTimeout(t,0)}function x(t,e){return t.reduce((function(t,n,r){var o=e(n,r);return o&&(t[o[0]]=o[1]),t}),{})}function k(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function A(t,e){if(f(t,e))return t[e];if(!e)return t;if("string"!==typeof e){for(var n=[],r=0,o=e.length;r<o;++r){var i=A(t,e[r]);n.push(i)}return n}var a=e.indexOf(".");if(-1!==a){var u=t[e.substr(0,a)];return void 0===u?void 0:A(u,e.substr(a+1))}}function S(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!==typeof e&&"length"in e){w("string"!==typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)S(t,e[r],n[r])}else{var a=e.indexOf(".");if(-1!==a){var u=e.substr(0,a),s=e.substr(a+1);if(""===s)void 0===n?i(t)&&!isNaN(parseInt(u))?t.splice(u,1):delete t[u]:t[u]=n;else{var c=t[u];c||(c=t[u]={}),S(c,s,n)}}else void 0===n?i(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function O(t,e){"string"===typeof e?S(t,e,void 0):"length"in e&&[].map.call(e,(function(e){S(t,e,void 0)}))}function P(t){var e={};for(var n in t)f(t,n)&&(e[n]=t[n]);return e}var E=[].concat;function j(t){return E.apply([],t)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(j([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return a[t]})),R=T.map((function(t){return a[t]})),I=x(T,(function(t){return[t,!0]}));function C(t){if(!t||"object"!==typeof t)return t;var e;if(i(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(C(t[n]))}else if(R.indexOf(t.constructor)>=0)e=t;else for(var o in e=t.constructor?Object.create(t.constructor.prototype):{},t)f(t,o)&&(e[o]=C(t[o]));return e}var B={}.toString;function D(t){return B.call(t).slice(8,-1)}var F=function(t,e){return"Array"===e?""+t.map((function(t){return F(t,D(t))})):"ArrayBuffer"===e?""+new Uint8Array(t):"Date"===e?t.getTime():ArrayBuffer.isView(t)?""+new Uint8Array(t.buffer):t};function M(t,e,n,r){return n=n||{},r=r||"",o(t).forEach((function(o){if(f(e,o)){var i=t[o],a=e[o];if("object"===typeof i&&"object"===typeof a&&i&&a){var u=D(i),s=D(a);u===s?I[u]?F(i,u)!==F(a,s)&&(n[r+o]=e[o]):M(i,a,n,r+o+"."):n[r+o]=e[o]}else i!==a&&(n[r+o]=e[o])}else n[r+o]=void 0})),o(e).forEach((function(o){f(t,o)||(n[r+o]=e[o])})),n}var L="undefined"!==typeof Symbol&&Symbol.iterator,K=L?function(t){var e;return null!=t&&(e=t[L])&&e.apply(t)}:function(){return null},U={};function q(t){var e,n,r,o;if(1===arguments.length){if(i(t))return t.slice();if(this===U&&"string"===typeof t)return[t];if(o=K(t)){n=[];while(r=o.next(),!r.done)n.push(r.value);return n}if(null==t)return[t];if(e=t.length,"number"===typeof e){n=new Array(e);while(e--)n[e]=t[e];return n}return[t]}e=arguments.length,n=new Array(e);while(e--)n[e]=arguments[e];return n}var N="undefined"!==typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},W="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function H(t,e){W=t,V=e}var V=function(){return!0},z=!new Error("").stack;function G(){if(z)try{throw new Error}catch(t){return t}return new Error}function Y(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(V).map((function(t){return"\n"+t})).join("")):""}var $=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Q=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],X=$.concat(Q),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Z(t,e){this._e=G(),this.name=t,this.message=e}function tt(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}function et(t,e,n,r){this._e=G(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=tt(t,e)}function nt(t,e){this._e=G(),this.name="BulkError",this.failures=e,this.message=tt(t,e)}p(Z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Y(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(et).from(Z),p(nt).from(Z);var rt=X.reduce((function(t,e){return t[e]=e+"Error",t}),{}),ot=Z,it=X.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=G(),this.name=n,t?"string"===typeof t?(this.message=t+(r?"\n "+r:""),this.inner=r||null):"object"===typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=J[e]||n,this.inner=null)}return p(r).from(ot),t[e]=r,t}),{});it.Syntax=SyntaxError,it.Type=TypeError,it.Range=RangeError;var at=Q.reduce((function(t,e){return t[e+"Error"]=it[e],t}),{});function ut(t,e){if(!t||t instanceof Z||t instanceof TypeError||t instanceof SyntaxError||!t.name||!at[t.name])return t;var n=new at[t.name](e||t.message,t);return"stack"in t&&d(n,"stack",{get:function(){return this.inner.stack}}),n}var st=X.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=it[e]),t}),{});function ct(){}function ft(t){return t}function lt(t,e){return null==t||t===ft?e:function(n){return e(t(n))}}function ht(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function dt(t,e){return t===ct?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ht(r,this.onsuccess):r),o&&(this.onerror=this.onerror?ht(o,this.onerror):o),void 0!==i?i:n}}function pt(t,e){return t===ct?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ht(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ht(r,this.onerror):r)}}function vt(t,e){return t===ct?e:function(n){var r=t.apply(this,arguments);u(n,r);var o=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?ht(o,this.onsuccess):o),i&&(this.onerror=this.onerror?ht(i,this.onerror):i),void 0===r?void 0===a?void 0:a:u(r,a)}}function yt(t,e){return t===ct?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function bt(t,e){return t===ct?e:function(){var n=t.apply(this,arguments);if(n&&"function"===typeof n.then){var r=this,o=arguments.length,i=new Array(o);while(o--)i[o]=arguments[o];return n.then((function(){return e.apply(r,i)}))}return e.apply(this,arguments)}}st.ModifyError=et,st.DexieError=Z,st.BulkError=nt;var gt={},mt=100,wt=20,_t=100,xt="undefined"===typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"===typeof crypto||!crypto.subtle)return[t,t.__proto__,t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,e.__proto__,t]}(),kt=xt[0],At=xt[1],St=xt[2],Ot=At&&At.then,Pt=kt&&kt.constructor,Et=!!St,jt=!1,Tt=St?function(){St.then(Zt)}:a.setImmediate?setImmediate.bind(null,Zt):a.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){Zt(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Zt,0)},Rt=function(t,e){Ut.push([t,e]),Ct&&(Tt(),Ct=!1)},It=!0,Ct=!0,Bt=[],Dt=[],Ft=null,Mt=ft,Lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Pe,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{Pe(t[0],t[1])}catch(e){}}))}},Kt=Lt,Ut=[],qt=0,Nt=[];function Wt(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ct,this._lib=!1;var e=this._PSD=Kt;if(W&&(this._stackHolder=G(),this._prev=null,this._numPrev=0),"function"!==typeof t){if(t!==gt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Gt(this,this._value))}this._state=null,this._value=null,++e.ref,zt(this,t)}var Ht={get:function(){var t=Kt,e=he;function n(n,r){var o=this,i=!t.global&&(t!==Kt||e!==he),a=i&&!ye(),u=new Wt((function(e,u){$t(o,new Vt(Ae(n,t,i,a),Ae(r,t,i,a),e,u,t))}));return W&&Jt(u,this),u}return n.prototype=gt,n},set:function(t){d(this,"then",t&&t.prototype===gt?Ht:{get:function(){return t},set:Ht.set})}};function Vt(t,e,n,r,o){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function zt(t,e){try{e((function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&te();e&&"function"===typeof e.then?zt(t,(function(t,n){e instanceof Wt?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,Yt(t)),n&&ee()}}),Gt.bind(null,t))}catch(n){Gt(t,n)}}function Gt(t,e){if(Dt.push(e),null===t._state){var n=t._lib&&te();e=Mt(e),t._state=!1,t._value=e,W&&null!==e&&"object"===typeof e&&!e._promise&&k((function(){var n=y(e,"stack");e._promise=t,d(e,"stack",{get:function(){return jt?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),oe(t),Yt(t),n&&ee()}}function Yt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)$t(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===qt&&(++qt,Rt((function(){0===--qt&&ne()}),[]))}function $t(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++qt,Rt(Qt,[n,t,e])}else t._listeners.push(e)}function Qt(t,e,n){try{Ft=e;var r,o=e._value;e._state?r=t(o):(Dt.length&&(Dt=[]),r=t(o),-1===Dt.indexOf(o)&&ie(e)),n.resolve(r)}catch(i){n.reject(i)}finally{Ft=null,0===--qt&&ne(),--n.psd.ref||n.psd.finalize()}}function Xt(t,e,n){if(e.length===n)return e;var r="";if(!1===t._state){var o,i,a=t._value;null!=a?(o=a.name||"Error",i=a.message||a,r=Y(a,0)):(o=a,i=""),e.push(o+(i?": "+i:"")+r)}return W&&(r=Y(t._stackHolder,2),r&&-1===e.indexOf(r)&&e.push(r),t._prev&&Xt(t._prev,e,n)),e}function Jt(t,e){var n=e?e._numPrev+1:0;n<mt&&(t._prev=e,t._numPrev=n)}function Zt(){te()&&ee()}function te(){var t=It;return It=!1,Ct=!1,t}function ee(){var t,e,n;do{while(Ut.length>0)for(t=Ut,Ut=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Ut.length>0);It=!0,Ct=!0}function ne(){var t=Bt;Bt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));var e=Nt.slice(0),n=e.length;while(n)e[--n]()}function re(t){function e(){t(),Nt.splice(Nt.indexOf(e),1)}Nt.push(e),++qt,Rt((function(){0===--qt&&ne()}),[])}function oe(t){Bt.some((function(e){return e._value===t._value}))||Bt.push(t)}function ie(t){var e=Bt.length;while(e)if(Bt[--e]._value===t._value)return void Bt.splice(e,1)}function ae(t){return new Wt(gt,!1,t)}function ue(t,e){var n=Kt;return function(){var r=te(),o=Kt;try{return we(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{we(o,!1),r&&ee()}}}l(Wt.prototype,{then:Ht,_then:function(t,e){$t(this,new Vt(null,null,t,e,Kt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"===typeof e?this.then(null,(function(t){return t instanceof e?n(t):ae(t)})):this.then(null,(function(t){return t&&t.name===e?n(t):ae(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),ae(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{jt=!0;var t=Xt(this,[],wt),e=t.join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{jt=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Wt((function(r,o){var i=setTimeout((function(){return o(new it.Timeout(e))}),t);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!==typeof Symbol&&Symbol.toStringTag&&d(Wt.prototype,Symbol.toStringTag,"Dexie.Promise"),Lt.env=_e(),l(Wt,{all:function(){var t=q.apply(null,arguments).map(be);return new Wt((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(o,i){return Wt.resolve(o).then((function(n){t[i]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof Wt)return t;if(t&&"function"===typeof t.then)return new Wt((function(e,n){t.then(e,n)}));var e=new Wt(gt,!0,t);return Jt(e,Ft),e},reject:ae,race:function(){var t=q.apply(null,arguments).map(be);return new Wt((function(e,n){t.map((function(t){return Wt.resolve(t).then(e,n)}))}))},PSD:{get:function(){return Kt},set:function(t){return Kt=t}},totalEchoes:{get:function(){return he}},newPSD:pe,usePSD:xe,scheduler:{get:function(){return Rt},set:function(t){Rt=t}},rejectionMapper:{get:function(){return Mt},set:function(t){Mt=t}},follow:function(t,e){return new Wt((function(n,r){return pe((function(e,n){var r=Kt;r.unhandleds=[],r.onunhandled=n,r.finalize=ht((function(){var t=this;re((function(){0===t.unhandleds.length?e():n(t.unhandleds[0])}))}),r.finalize),t()}),e,n,r)}))}}),Pt&&(Pt.allSettled&&d(Wt,"allSettled",(function(){var t=q.apply(null,arguments).map(be);return new Wt((function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach((function(t,o){return Wt.resolve(t).then((function(t){return r[o]={status:"fulfilled",value:t}}),(function(t){return r[o]={status:"rejected",reason:t}})).then((function(){return--n||e(r)}))}))}))})),Pt.any&&"undefined"!==typeof AggregateError&&d(Wt,"any",(function(){var t=q.apply(null,arguments).map(be);return new Wt((function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,o=new Array(r);t.forEach((function(t,i){return Wt.resolve(t).then((function(t){return e(t)}),(function(t){o[i]=t,--r||n(new AggregateError(o))}))}))}))})));var se={awaits:0,echoes:0,id:0},ce=0,fe=[],le=0,he=0,de=0;function pe(t,e,n,r){var o=Kt,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++de;var a=Lt.env;i.env=Et?{Promise:Wt,PromiseProp:{value:Wt,configurable:!0,writable:!0},all:Wt.all,race:Wt.race,allSettled:Wt.allSettled,any:Wt.any,resolve:Wt.resolve,reject:Wt.reject,nthen:Se(a.nthen,i),gthen:Se(a.gthen,i)}:{},e&&u(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=xe(i,t,n,r);return 0===i.ref&&i.finalize(),s}function ve(){return se.id||(se.id=++ce),++se.awaits,se.echoes+=_t,se.id}function ye(){return!!se.awaits&&(0===--se.awaits&&(se.id=0),se.echoes=se.awaits*_t,!0)}function be(t){return se.echoes&&t&&t.constructor===Pt?(ve(),t.then((function(t){return ye(),t}),(function(t){return ye(),Ee(t)}))):t}function ge(t){++he,se.echoes&&0!==--se.echoes||(se.echoes=se.id=0),fe.push(Kt),we(t,!0)}function me(){var t=fe[fe.length-1];fe.pop(),we(t,!1)}function we(t,e){var n=Kt;if((e?!se.echoes||le++&&t===Kt:!le||--le&&t===Kt)||ke(e?ge.bind(null,t):me),t!==Kt&&(Kt=t,n===Lt&&(Lt.env=_e()),Et)){var r=Lt.env.Promise,o=t.env;At.then=o.nthen,r.prototype.then=o.gthen,(n.global||t.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function _e(){var t=a.Promise;return Et?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:At.then,gthen:t.prototype.then}:{}}function xe(t,e,n,r,o){var i=Kt;try{return we(t,!0),e(n,r,o)}finally{we(i,!1)}}function ke(t){Ot.call(kt,t)}function Ae(t,e,n,r){return"function"!==typeof t?t:function(){var o=Kt;n&&ve(),we(e,!0);try{return t.apply(this,arguments)}finally{we(o,!1),r&&ke(ye)}}}function Se(t,e){return function(n,r){return t.call(this,Ae(n,e),Ae(r,e))}}-1===(""+Ot).indexOf("[native code]")&&(ve=ye=ct);var Oe="unhandledrejection";function Pe(t,e){var n;try{n=e.onuncatched(t)}catch(i){}if(!1!==n)try{var r,o={promise:e,reason:t};if(a.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Oe,!0,!0),u(r,o)):a.CustomEvent&&(r=new CustomEvent(Oe,{detail:o}),u(r,o)),r&&a.dispatchEvent&&(dispatchEvent(r),!a.PromiseRejectionEvent&&a.onunhandledrejection))try{a.onunhandledrejection(r)}catch(s){}W&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch(i){}}var Ee=Wt.reject;function je(t,e,n,r){if(t._state.openComplete||Kt.letThrough){var o=t._createTransaction(e,n,t._dbSchema);try{o.create()}catch(i){return Ee(i)}return o._promise(e,(function(t,e){return pe((function(){return Kt.trans=o,r(t,e,o)}))})).then((function(t){return o._completion.then((function(){return t}))}))}if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Ee(new it.DatabaseClosed);t.open().catch(ct)}return t._state.dbReadyPromise.then((function(){return je(t,e,n,r)}))}var Te="3.0.3",Re=String.fromCharCode(65535),Ie=-1/0,Ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Be="String expected.",De=[],Fe="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Me=Fe,Le=Fe,Ke=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},Ue="__dbnames",qe="readonly",Ne="readwrite";function We(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var He={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ve(t){return function(e){return void 0===A(e,t)&&(e=C(e),O(e,t)),e}}var ze=function(){function t(){}return t.prototype._trans=function(t,e,n){var r=this._tx||Kt.trans,o=this.name;function i(t,n,r){if(!r.schema[o])throw new it.NotFound("Table "+o+" not part of transaction");return e(r.idbtrans,r)}var a=te();try{return r&&r.db===this.db?r===Kt.trans?r._promise(t,i,n):pe((function(){return r._promise(t,i,n)}),{trans:r,transless:Kt.transless||Kt}):je(this.db,t,[this.name],i)}finally{a&&ee()}},t.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(function(e){return n.core.get({trans:e,key:t}).then((function(t){return n.hook.reading.fire(t)}))})).then(e)},t.prototype.where=function(t){if("string"===typeof t)return new this.db.WhereClause(this,t);if(i(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var e=o(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&e.every((function(e){return t.keyPath.indexOf(e)>=0}))&&t.keyPath.every((function(t){return e.indexOf(t)>=0}))}))[0];if(n&&this.db._maxKey!==Re)return this.where(n.name).equals(n.keyPath.map((function(e){return t[e]})));!n&&W&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var r=this.schema.idxByName,a=this.db._deps.indexedDB;function u(t,e){try{return 0===a.cmp(t,e)}catch(n){return!1}}var s=e.reduce((function(e,n){var o=e[0],a=e[1],s=r[n],c=t[n];return[o||s,o||!s?We(a,s&&s.multi?function(t){var e=A(t,n);return i(e)&&e.some((function(t){return u(c,t)}))}:function(t){return u(c,A(t,n))}):a]}),[null,null]),c=s[0],f=s[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(f):n?this.filter(f):this.where(e).equals("")},t.prototype.filter=function(t){return this.toCollection().and(t)},t.prototype.count=function(t){return this.toCollection().count(t)},t.prototype.offset=function(t){return this.toCollection().offset(t)},t.prototype.limit=function(t){return this.toCollection().limit(t)},t.prototype.each=function(t){return this.toCollection().each(t)},t.prototype.toArray=function(t){return this.toCollection().toArray(t)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,i(t)?"["+t.join("+")+"]":t))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(t){this.schema.mappedClass=t;var e=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(f(e,r))try{n[r]=e[r]}catch(o){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t},t.prototype.defineClass=function(){function t(t){u(this,t)}return this.mapToClass(t)},t.prototype.add=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=t;return i&&o&&(a=Ve(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[a]})})).then((function(t){return t.numFailures?Wt.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{S(t,i,e)}catch(n){}return e}))},t.prototype.update=function(t,e){if("object"!==typeof e||i(e))throw new it.InvalidArgument("Modifications must be an object.");if("object"!==typeof t||i(t))return this.where(":id").equals(t).modify(e);o(e).forEach((function(n){S(t,n,e[n])}));var n=A(t,this.schema.primKey.keyPath);return void 0===n?Ee(new it.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},t.prototype.put=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=t;return i&&o&&(a=Ve(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"put",values:[a],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?Wt.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{S(t,i,e)}catch(n){}return e}))},t.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?Wt.reject(t.failures[0]):void 0}))},t.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:He})})).then((function(t){return t.numFailures?Wt.reject(t.failures[0]):void 0}))},t.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(n){return e.core.getMany({keys:t,trans:n}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},t.prototype.bulkAdd=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0;n=n||(o?void 0:e);var i=n?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&o)throw new it.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new it.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,c=u&&a?t.map(Ve(u)):t;return r.core.mutate({trans:e,type:"add",keys:o,values:c,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult,a=t.failures,u=i?n:o;if(0===e)return u;throw new nt(r.name+".bulkAdd(): "+e+" of "+s+" operations failed",Object.keys(a).map((function(t){return a[t]})))}))}))},t.prototype.bulkPut=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0;n=n||(o?void 0:e);var i=n?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=r.schema.primKey,a=n.auto,u=n.keyPath;if(u&&o)throw new it.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new it.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,c=u&&a?t.map(Ve(u)):t;return r.core.mutate({trans:e,type:"put",keys:o,values:c,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult,a=t.failures,u=i?n:o;if(0===e)return u;throw new nt(r.name+".bulkPut(): "+e+" of "+s+" operations failed",Object.keys(a).map((function(t){return a[t]})))}))}))},t.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:t})})).then((function(t){var r=t.numFailures,o=t.lastResult,i=t.failures;if(0===r)return o;throw new nt(e.name+".bulkDelete(): "+r+" of "+n+" operations failed",i)}))},t}();function Ge(t){var e={},n=function(n,r){if(r){var o=arguments.length,i=new Array(o-1);while(--o)i[o-1]=arguments[o];return e[n].subscribe.apply(null,i),t}if("string"===typeof n)return e[n]};n.addEventType=u;for(var r=1,a=arguments.length;r<a;++r)u(arguments[r]);return n;function u(t,r,o){if("object"===typeof t)return s(t);r||(r=yt),o||(o=ct);var i={subscribers:[],fire:o,subscribe:function(t){-1===i.subscribers.indexOf(t)&&(i.subscribers.push(t),i.fire=r(i.fire,t))},unsubscribe:function(t){i.subscribers=i.subscribers.filter((function(e){return e!==t})),i.fire=i.subscribers.reduce(r,o)}};return e[t]=n[t]=i,i}function s(t){o(t).forEach((function(e){var n=t[e];if(i(n))u(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new it.InvalidArgument("Invalid event config");var r=u(e,ft,(function(){var t=arguments.length,e=new Array(t);while(t--)e[t]=arguments[t];r.subscribers.forEach((function(t){_((function(){t.apply(null,e)}))}))}))}}))}}function Ye(t,e){return p(e).from({prototype:t}),e}function $e(t){return Ye(ze.prototype,(function(e,n,r){this.db=t,this._tx=r,this.name=e,this.schema=n,this.hook=t._allTables[e]?t._allTables[e].hook:Ge(null,{creating:[dt,ct],reading:[lt,ft],updating:[vt,ct],deleting:[pt,ct]})}))}function Qe(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Xe(t,e){t.filter=We(t.filter,e)}function Je(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return We(r(),e())}:e,t.justLimit=n&&!r}function Ze(t,e){t.isMatch=We(t.isMatch,e)}function tn(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new it.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function en(t,e,n){var r=tn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function nn(t,e,n,r){var o=t.replayFilter?We(t.filter,t.replayFilter()):t.filter;if(t.or){var i={},a=function(t,n,r){if(!o||o(n,r,(function(t){return n.stop(t)}),(function(t){return n.fail(t)}))){var a=n.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),f(i,u)||(i[u]=!0,e(t,n,r))}};return Promise.all([t.or._iterate(a,n),rn(en(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}return rn(en(t,r,n),We(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function rn(t,e,n,r){var o=r?function(t,e,o){return n(r(t),e,o)}:n,i=ue(o);return t.then((function(t){if(t)return t.start((function(){var n=function(){return t.continue()};e&&!e(t,(function(t){return n=t}),(function(e){t.stop(e),n=ct}),(function(e){t.fail(e),n=ct}))||i(t.value,t,(function(t){return n=t})),n()}))}))}var on=function(){function t(){}return t.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,Ee.bind(null,n.error)):n.table._trans("readonly",t).then(e)},t.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,Ee.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},t.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=We(e.algorithm,t)},t.prototype._iterate=function(t,e){return nn(this._ctx,t,e,this._ctx.table.core)},t.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&u(n,t),e._ctx=n,e},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(t){var e=this._ctx;return this._read((function(n){return nn(e,t,n,e.table.core)}))},t.prototype.count=function(t){var e=this;return this._read((function(t){var n=e._ctx,r=n.table.core;if(Qe(n,!0))return r.count({trans:t,query:{index:tn(n,r.schema),range:n.range}}).then((function(t){return Math.min(t,n.limit)}));var o=0;return nn(n,(function(){return++o,!1}),t,r).then((function(){return o}))})).then(t)},t.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],o=n.length-1;function i(t,e){return e?i(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function u(t,e){var n=i(t,o),r=i(e,o);return n<r?-a:n>r?a:0}return this.toArray((function(t){return t.sort(u)})).then(e)},t.prototype.toArray=function(t){var e=this;return this._read((function(t){var n=e._ctx;if("next"===n.dir&&Qe(n,!0)&&n.limit>0){var r=n.valueMapper,o=tn(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(t){var e=t.result;return r?e.map(r):e}))}var i=[];return nn(n,(function(t){return i.push(t)}),t,n.table.core).then((function(){return i}))}),t)},t.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,Qe(e)?Je(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n((function(){t.advance(e),e=0})),!1))}})):Je(e,(function(){var e=t;return function(){return--e<0}}))),this},t.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Je(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}}),!0),this},t.prototype.until=function(t,e){return Xe(this._ctx,(function(n,r,o){return!t(n.value)||(r(o),e)})),this},t.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},t.prototype.last=function(t){return this.reverse().first(t)},t.prototype.filter=function(t){return Xe(this._ctx,(function(e){return t(e.value)})),Ze(this._ctx,t),this},t.prototype.and=function(t){return this.filter(t)},t.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},t.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},t.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},t.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},t.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},t.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&Qe(e,!0)&&e.limit>0)return this._read((function(t){var n=tn(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((function(t){var e=t.result;return e})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},t.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},t.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},t.prototype.lastKey=function(t){return this.reverse().firstKey(t)},t.prototype.distinct=function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var n={};return Xe(this._ctx,(function(t){var e=t.primaryKey.toString(),r=f(n,e);return n[e]=!0,!r})),this},t.prototype.modify=function(t){var e=this,n=this._ctx;return this._write((function(r){var i;if("function"===typeof t)i=t;else{var a=o(t),u=a.length;i=function(e){for(var n=!1,r=0;r<u;++r){var o=a[r],i=t[o];A(e,o)!==i&&(S(e,o,i),n=!0)}return n}}var s=n.table.core,c=s.schema.primaryKey,f=c.outbound,l=c.extractKey,h="testmode"in pr?1:2e3,d=e.db.core.cmp,p=[],v=0,y=[],b=function(t,e){var n=e.failures,r=e.numFailures;v+=t-r;for(var i=0,a=o(n);i<a.length;i++){var u=a[i];p.push(n[u])}};return e.clone().primaryKeys().then((function(t){var e=function(n){var o=Math.min(h,t.length-n);return s.getMany({trans:r,keys:t.slice(n,n+o)}).then((function(a){for(var u=[],c=[],p=f?[]:null,v=[],y=0;y<o;++y){var g=a[y],m={value:C(g),primKey:t[n+y]};!1!==i.call(m,m.value,m)&&(null==m.value?v.push(t[n+y]):f||0===d(l(g),l(m.value))?(c.push(m.value),f&&p.push(t[n+y])):(v.push(t[n+y]),u.push(m.value)))}return Promise.resolve(u.length>0&&s.mutate({trans:r,type:"add",values:u}).then((function(t){for(var e in t.failures)v.splice(parseInt(e),1);b(u.length,t)}))).then((function(t){return c.length>0&&s.mutate({trans:r,type:"put",keys:p,values:c}).then((function(t){return b(c.length,t)}))})).then((function(){return v.length>0&&s.mutate({trans:r,type:"delete",keys:v}).then((function(t){return b(v.length,t)}))})).then((function(){return t.length>n+o&&e(n+h)}))}))};return e(0).then((function(){if(p.length>0)throw new et("Error modifying one or more objects",p,v,y);return t.length}))}))}))},t.prototype.delete=function(){var t=this._ctx,e=t.range;return Qe(t)&&(t.isPrimKey&&!Le||3===e.type)?this._write((function(n){var r=t.table.core.schema.primaryKey,o=e;return t.table.core.count({trans:n,query:{index:r,range:o}}).then((function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(t){var n=t.failures,r=(t.lastResult,t.results,t.numFailures);if(r)throw new et("Could not delete some values",Object.keys(n).map((function(t){return n[t]})),e-r);return e-r}))}))})):this.modify((function(t,e){return e.value=null}))},t}();function an(t){return Ye(on.prototype,(function(e,n){this.db=t;var r=He,o=null;if(n)try{r=n()}catch(s){o=s}var i=e._ctx,a=i.table,u=a.hook.reading.fire;this._ctx={table:a,index:i.index,isPrimKey:!i.index||a.schema.primKey.keyPath&&i.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:i.or,valueMapper:u!==ft?u:null}}))}function un(t,e){return t<e?-1:t===e?0:1}function sn(t,e){return t>e?-1:t===e?0:1}function cn(t,e,n){var r=t instanceof bn?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function fn(t){return new t.Collection(t,(function(){return yn("")})).limit(0)}function ln(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function hn(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function dn(t,e,n,r,o,i){for(var a=Math.min(t.length,r.length),u=-1,s=0;s<a;++s){var c=e[s];if(c!==r[s])return o(t[s],n[s])<0?t.substr(0,s)+n[s]+n.substr(s+1):o(t[s],r[s])<0?t.substr(0,s)+r[s]+n.substr(s+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;o(t[s],c)<0&&(u=s)}return a<r.length&&"next"===i?t+n.substr(t.length):a<t.length&&"prev"===i?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}function pn(t,e,n,r){var o,i,a,u,s,c,f,l=n.length;if(!n.every((function(t){return"string"===typeof t})))return cn(t,Be);function h(t){o=ln(t),i=hn(t),a="next"===t?un:sn;var e=n.map((function(t){return{lower:i(t),upper:o(t)}})).sort((function(t,e){return a(t.lower,e.lower)}));u=e.map((function(t){return t.upper})),s=e.map((function(t){return t.lower})),c=t,f="next"===t?"":r}h("next");var d=new t.Collection(t,(function(){return vn(u[0],s[l-1]+r)}));d._ondirectionchange=function(t){h(t)};var p=0;return d._addAlgorithm((function(t,n,r){var o=t.key;if("string"!==typeof o)return!1;var h=i(o);if(e(h,s,p))return!0;for(var d=null,v=p;v<l;++v){var y=dn(o,h,u[v],s[v],a,c);null===y&&null===d?p=v+1:(null===d||a(d,y)>0)&&(d=y)}return n(null!==d?function(){t.continue(d+f)}:r),!1})),d}function vn(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function yn(t){return{type:1,lower:t,upper:t}}var bn=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),t.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return this._cmp(t,e)>0||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?fn(this):new this.Collection(this,(function(){return vn(t,e,!n,!r)}))}catch(o){return cn(this,Ce)}},t.prototype.equals=function(t){return null==t?cn(this,Ce):new this.Collection(this,(function(){return yn(t)}))},t.prototype.above=function(t){return null==t?cn(this,Ce):new this.Collection(this,(function(){return vn(t,void 0,!0)}))},t.prototype.aboveOrEqual=function(t){return null==t?cn(this,Ce):new this.Collection(this,(function(){return vn(t,void 0,!1)}))},t.prototype.below=function(t){return null==t?cn(this,Ce):new this.Collection(this,(function(){return vn(void 0,t,!1,!0)}))},t.prototype.belowOrEqual=function(t){return null==t?cn(this,Ce):new this.Collection(this,(function(){return vn(void 0,t)}))},t.prototype.startsWith=function(t){return"string"!==typeof t?cn(this,Be):this.between(t,t+Re,!0,!0)},t.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):pn(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],Re)},t.prototype.equalsIgnoreCase=function(t){return pn(this,(function(t,e){return t===e[0]}),[t],"")},t.prototype.anyOfIgnoreCase=function(){var t=q.apply(U,arguments);return 0===t.length?fn(this):pn(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var t=q.apply(U,arguments);return 0===t.length?fn(this):pn(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,Re)},t.prototype.anyOf=function(){var t=this,e=q.apply(U,arguments),n=this._cmp;try{e.sort(n)}catch(i){return cn(this,Ce)}if(0===e.length)return fn(this);var r=new this.Collection(this,(function(){return vn(e[0],e[e.length-1])}));r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var o=0;return r._addAlgorithm((function(t,r,i){var a=t.key;while(n(a,e[o])>0)if(++o,o===e.length)return r(i),!1;return 0===n(a,e[o])||(r((function(){t.continue(e[o])})),!1)})),r},t.prototype.notEqual=function(t){return this.inAnyRange([[Ie,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var t=q.apply(U,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(n){return cn(this,Ce)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[Ie,e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(0===t.length)return fn(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&o(t[0],t[1])<=0})))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",it.InvalidArgument);var s=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers;function f(t,e){for(var n=0,o=t.length;n<o;++n){var i=t[n];if(r(e[0],i[1])<0&&r(e[1],i[0])>0){i[0]=a(i[0],e[0]),i[1]=u(i[1],e[1]);break}}return n===o&&t.push(e),t}var l,h=o;function d(t,e){return h(t[0],e[0])}try{l=t.reduce(f,[]),l.sort(d)}catch(w){return cn(this,Ce)}var p=0,v=c?function(t){return o(t,l[p][1])>0}:function(t){return o(t,l[p][1])>=0},y=s?function(t){return i(t,l[p][0])>0}:function(t){return i(t,l[p][0])>=0};function b(t){return!v(t)&&!y(t)}var g=v,m=new this.Collection(this,(function(){return vn(l[0][0],l[l.length-1][1],!s,!c)}));return m._ondirectionchange=function(t){"next"===t?(g=v,h=o):(g=y,h=i),l.sort(d)},m._addAlgorithm((function(t,e,r){var i=t.key;while(g(i))if(++p,p===l.length)return e(r),!1;return!!b(i)||(0===n._cmp(i,l[p][1])||0===n._cmp(i,l[p][0])||e((function(){h===o?t.continue(l[p][0]):t.continue(l[p][1])})),!1)})),m},t.prototype.startsWithAnyOf=function(){var t=q.apply(U,arguments);return t.every((function(t){return"string"===typeof t}))?0===t.length?fn(this):this.inAnyRange(t.map((function(t){return[t,t+Re]}))):cn(this,"startsWithAnyOf() only works with strings")},t}();function gn(t){return Ye(bn.prototype,(function(e,n,r){this.db=t,this._ctx={table:e,index:":id"===n?null:n,or:r};var o=t._deps.indexedDB;if(!o)throw new it.MissingAPI("indexedDB API missing");this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(t,e){return o.cmp(e,t)},this._max=function(t,e){return o.cmp(t,e)>0?t:e},this._min=function(t,e){return o.cmp(t,e)<0?t:e},this._IDBKeyRange=t._deps.IDBKeyRange}))}function mn(t){return 1===t.length?t[0]:t}function wn(t){try{return t.only([[]]),[[]]}catch(e){return Re}}function _n(t){return ue((function(e){return xn(e),t(e.target.error),!1}))}function xn(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var kn=function(){function t(){}return t.prototype._lock=function(){return w(!Kt.global),++this._reculock,1!==this._reculock||Kt.global||(Kt.lockOwnerFor=this),this},t.prototype._unlock=function(){if(w(!Kt.global),0===--this._reculock){Kt.global||(Kt.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var t=this._blockedFuncs.shift();try{xe(t[1],t[0])}catch(e){}}}return this},t.prototype._locked=function(){return this._reculock&&Kt.lockOwnerFor!==this},t.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(w(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new it.DatabaseClosed(r);case"MissingAPIError":throw new it.MissingAPI(r.message,r);default:throw new it.OpenFailed(r)}if(!this.active)throw new it.TransactionInactive;return w(null===this._completion._state),t=this.idbtrans=t||n.transaction(mn(this.storeNames),this.mode),t.onerror=ue((function(n){xn(n),e._reject(t.error)})),t.onabort=ue((function(n){xn(n),e.active&&e._reject(new it.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=ue((function(){e.active=!1,e._resolve()})),this},t.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return Ee(new it.ReadOnly("Transaction is readonly"));if(!this.active)return Ee(new it.TransactionInactive);if(this._locked())return new Wt((function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},Kt])}));if(n)return pe((function(){var t=new Wt((function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var o=new Wt((function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return o._lib=!0,o},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(t){var e=this._root(),n=Wt.resolve(t);if(e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return n}));else{e._waitingFor=n,e._waitingQueue=[];var r=e.idbtrans.objectStore(e.storeNames[0]);(function t(){++e._spinCount;while(e._waitingQueue.length)e._waitingQueue.shift()();e._waitingFor&&(r.get(-1/0).onsuccess=t)})()}var o=e._waitingFor;return new Wt((function(t,r){n.then((function(n){return e._waitingQueue.push(ue(t.bind(null,n)))}),(function(t){return e._waitingQueue.push(ue(r.bind(null,t)))})).finally((function(){e._waitingFor===o&&(e._waitingFor=null)}))}))},t.prototype.abort=function(){this.active&&this._reject(new it.Abort),this.active=!1},t.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(f(e,t))return e[t];var n=this.schema[t];if(!n)throw new it.NotFound("Table "+t+" not part of transaction");var r=new this.db.Table(t,n,this);return r.core=this.db.core.table(t),e[t]=r,r},t}();function An(t){return Ye(kn.prototype,(function(e,n,r,o){var i=this;this.db=t,this.mode=e,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Ge(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Wt((function(t,e){i._resolve=t,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),Ee(t)}))}))}function Sn(t,e,n,r,o,i,a){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:i,src:(n&&!a?"&":"")+(r?"*":"")+(o?"++":"")+On(e)}}function On(t){return"string"===typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Pn(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:x(n,(function(t){return[t.name,t]}))}}function En(t){return null==t?function(){}:"string"===typeof t?jn(t):function(e){return A(e,t)}}function jn(t){var e=t.split(".");return 1===e.length?function(e){return e[t]}:function(e){return A(e,t)}}function Tn(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}function Rn(t,e,n){return"add"===e.type?Promise.resolve(new Array(e.values.length)):t.getMany({trans:e.trans,keys:n})}function In(t){return[].slice.call(t)}var Cn=0;function Bn(t){return null==t?":id":"string"===typeof t?t:"["+t.join("+")+"]"}function Dn(t,e,n,o){var a=e.cmp.bind(e);function u(t,e){var n=In(t.objectStoreNames);return{schema:{name:t.name,tables:n.map((function(t){return e.objectStore(t)})).map((function(t){var e=t.keyPath,n=t.autoIncrement,r=i(e),o=null==e,a={},u={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:En(e)},indexes:In(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,n=t.unique,r=t.multiEntry,o=t.keyPath,u=i(o),s={name:e,compound:u,keyPath:o,unique:n,multiEntry:r,extractKey:En(o)};return a[Bn(o)]=s,s})),getIndexByKeyPath:function(t){return a[Bn(t)]}};return a[":id"]=u.primaryKey,null!=e&&(a[Bn(e)]=u.primaryKey),u}))},hasGetAll:n.length>0&&"getAll"in e.objectStore(n[0])&&!("undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function s(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var e=t.lower,r=t.upper,o=t.lowerOpen,i=t.upperOpen,a=void 0===e?void 0===r?null:n.upperBound(r,!!i):void 0===r?n.lowerBound(e,!!o):n.bound(e,r,!!o,!!i);return a}function c(t){var e=t.name;function n(n){var o=n.trans,i=n.type,a=n.keys,u=n.values,c=n.range,f=n.wantResults;return new Promise((function(n,l){n=ue(n);var h=o.objectStore(e),d=null==h.keyPath,p="put"===i||"add"===i;if(!p&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var v=(a||u||{length:1}).length;if(a&&u&&a.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===v)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var y,b=f&&r(a||Tn(t.primaryKey,{type:i,keys:a,values:u})),g=[],m=0,w=function(t){++m,xn(t),b&&(b[t.target._reqno]=void 0),g[t.target._reqno]=t.target.error},_=function(t){var e=t.target;b[e._reqno]=e.result};if("deleteRange"===i){if(4===c.type)return n({numFailures:m,failures:g,results:b,lastResult:void 0});y=3===c.type?h.clear():h.delete(s(c))}else{var x=p?d?[u,a]:[u,null]:[a,null],k=x[0],A=x[1];if(p)for(var S=0;S<v;++S)y=A&&void 0!==A[S]?h[i](k[S],A[S]):h[i](k[S]),y._reqno=S,b&&void 0===b[S]&&(y.onsuccess=_),y.onerror=w;else for(S=0;S<v;++S)y=h[i](k[S]),y._reqno=S,y.onerror=w}var O=function(t){var e=t.target.result;b&&(b[v-1]=e),n({numFailures:m,failures:g,results:b,lastResult:e})};y.onerror=function(t){w(t),O(t)},y.onsuccess=O}))}function o(t){var n=t.trans,r=t.values,o=t.query,i=t.reverse,a=t.unique;return new Promise((function(t,u){t=ue(t);var c=o.index,f=o.range,l=n.objectStore(e),h=c.isPrimaryKey?l:l.index(c.name),d=i?a?"prevunique":"prev":a?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(s(f),d):h.openKeyCursor(s(f),d);p.onerror=_n(u),p.onsuccess=ue((function(e){var r=p.result;if(r){r.___id=++Cn,r.done=!1;var o=r.continue.bind(r),i=r.continuePrimaryKey;i&&(i=i.bind(r));var a=r.advance.bind(r),s=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=s,r.fail=ue(u),r.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},r.start=function(t){var e=new Promise((function(t,e){t=ue(t),p.onerror=_n(e),r.fail=e,r.stop=function(e){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,t(e)}})),n=function(){if(p.result)try{t()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=ue((function(t){p.onsuccess=n,n()})),r.continue=o,r.continuePrimaryKey=i,r.advance=a,n(),e},t(r)}else t(null)}),u)}))}function i(t){return function(n){return new Promise((function(r,o){r=ue(r);var i=n.trans,a=n.values,u=n.limit,c=n.query,f=u===1/0?void 0:u,l=c.index,h=c.range,d=i.objectStore(e),p=l.isPrimaryKey?d:d.index(l.name),v=s(h);if(0===u)return r({result:[]});if(t){var y=a?p.getAll(v,f):p.getAllKeys(v,f);y.onsuccess=function(t){return r({result:t.target.result})},y.onerror=_n(o)}else{var b=0,g=a||!("openKeyCursor"in p)?p.openCursor(v):p.openKeyCursor(v),m=[];g.onsuccess=function(t){var e=g.result;return e?(m.push(a?e.value:e.primaryKey),++b===u?r({result:m}):void e.continue()):r({result:m})},g.onerror=_n(o)}}))}}return{name:e,schema:t,mutate:n,getMany:function(t){var n=t.trans,r=t.keys;return new Promise((function(t,o){t=ue(t);for(var i,a=n.objectStore(e),u=r.length,s=new Array(u),c=0,f=0,l=function(e){var n=e.target;null!=(s[n._pos]=n.result)&&0,++f===c&&t(s)},h=_n(o),d=0;d<u;++d){var p=r[d];null!=p&&(i=a.get(r[d]),i._pos=d,i.onsuccess=l,i.onerror=h,++c)}0===c&&t(s)}))},get:function(t){var n=t.trans,r=t.key;return new Promise((function(t,o){t=ue(t);var i=n.objectStore(e),a=i.get(r);a.onsuccess=function(e){return t(e.target.result)},a.onerror=_n(o)}))},query:i(h),openCursor:o,count:function(t){var n=t.query,r=t.trans,o=n.index,i=n.range;return new Promise((function(t,n){var a=r.objectStore(e),u=o.isPrimaryKey?a:a.index(o.name),c=s(i),f=c?u.count(c):u.count();f.onsuccess=ue((function(e){return t(e.target.result)})),f.onerror=_n(n)}))}}}var f=u(t,o),l=f.schema,h=f.hasGetAll,d=l.tables.map((function(t){return c(t)})),p={};return d.forEach((function(t){return p[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){var e=p[t];if(!e)throw new Error("Table '"+t+"' not found");return p[t]},cmp:a,MIN_KEY:-1/0,MAX_KEY:wn(n),schema:l}}function Fn(t,e){return e.reduce((function(t,e){var r=e.create;return n(n({},t),r(t))}),t)}function Mn(t,e,n,r){var o=n.IDBKeyRange,i=n.indexedDB,a=Fn(Dn(e,i,o,r),t.dbcore);return{dbcore:a}}function Ln(t,e){var n=e.db,r=Mn(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach((function(e){var n=e.name;t.core.schema.tables.some((function(t){return t.name===n}))&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))}))}function Kn(t,e,n,r){n.forEach((function(n){var o=r[n];e.forEach((function(e){var r=y(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?d(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,o))}))}))}function Un(t,e){e.forEach((function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]}))}function qn(t,e){return t._cfg.version-e._cfg.version}function Nn(t,e,n,r){var i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);var u=a._reject.bind(a),s=Kt.transless||Kt;pe((function(){Kt.trans=a,Kt.transless=s,0===e?(o(i).forEach((function(t){Vn(n,t,i[t].primKey,i[t].indexes)})),Ln(t,n),Wt.follow((function(){return t.on.populate.fire(a)})).catch(u)):Wn(t,e,a,n).catch(u)}))}function Wn(t,e,n,r){var i=[],a=t._versions,u=t._dbSchema=$n(t,t.idbdb,r),s=!1,c=a.filter((function(t){return t._cfg.version>=e}));function f(){return i.length?Wt.resolve(i.shift()(n.idbtrans)).then(f):Wt.resolve()}return c.forEach((function(a){i.push((function(){var i=u,c=a._cfg.dbschema;Jn(t,i,r),Jn(t,c,r),u=t._dbSchema=c;var f=Hn(i,c);f.add.forEach((function(t){Vn(r,t[0],t[1].primKey,t[1].indexes)})),f.change.forEach((function(t){if(t.recreate)throw new it.Upgrade("Not yet support for changing primary key");var e=r.objectStore(t.name);t.add.forEach((function(t){return Yn(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),Yn(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>e){Ln(t,r),n._memoizedTables={},s=!0;var h=P(c);f.del.forEach((function(t){h[t]=i[t]})),Un(t,[t.Transaction.prototype]),Kn(t,[t.Transaction.prototype],o(h),h),n.schema=h;var d,p=N(l);p&&ve();var v=Wt.follow((function(){if(d=l(n),d&&p){var t=ye.bind(null,null);d.then(t,t)}}));return d&&"function"===typeof d.then?Wt.resolve(d):v.then((function(){return d}))}})),i.push((function(e){if(!s||!Me){var r=a._cfg.dbschema;Gn(r,e)}Un(t,[t.Transaction.prototype]),Kn(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema}))})),f().then((function(){zn(u,r)}))}function Hn(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var o=t[n],i=e[n];if(o){var a={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!==""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!Fe)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,s=i.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var f=u[c],l=s[c];f?f.src!==l.src&&a.change.push(l):a.add.push(l)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,i])}return r}function Vn(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){return Yn(o,t)})),o}function zn(t,e){o(t).forEach((function(n){e.db.objectStoreNames.contains(n)||Vn(e,n,t[n].primKey,t[n].indexes)}))}function Gn(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}function Yn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function $n(t,e,n){var r={},o=g(e.objectStoreNames,0);return o.forEach((function(t){for(var e=n.objectStore(t),o=e.keyPath,i=Sn(On(o),o||"",!1,!1,!!e.autoIncrement,o&&"string"!==typeof o,!0),a=[],u=0;u<e.indexNames.length;++u){var s=e.index(e.indexNames[u]);o=s.keyPath;var c=Sn(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&"string"!==typeof o,!1);a.push(c)}r[t]=Pn(t,i,a)})),r}function Qn(t,e,n){t.verno=e.version/10;var r=t._dbSchema=$n(t,e,n);t._storeNames=g(e.objectStoreNames,0),Kn(t,[t._allTables],o(r),r)}function Xn(t,e){var n=$n(t,t.idbdb,e),r=Hn(n,t._dbSchema);return!(r.add.length||r.change.some((function(t){return t.add.length||t.change.length})))}function Jn(t,e,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],u=n.objectStore(i);t._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],f=u.index(c).keyPath,l="string"===typeof f?f:"["+g(f).join("+")+"]";if(e[i]){var h=e[i].idxByName[l];h&&(h.name=c,delete e[i].idxByName[l],e[i].idxByName[c]=h)}}}"undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Zn(t){return t.split(",").map((function(t,e){t=t.trim();var n=t.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Sn(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),i(r),0===e)}))}var tr,er=function(){function t(){}return t.prototype._parseStoresSpec=function(t,e){o(t).forEach((function(n){if(null!==t[n]){var r=Zn(t[n]),o=r.shift();if(o.multi)throw new it.Schema("Primary key cannot be multi-valued");r.forEach((function(t){if(t.auto)throw new it.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new it.Schema("Index must have a name and cannot be an empty string")})),e[n]=Pn(n,o,r)}}))},t.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,t):t;var n=e._versions,r={},i={};return n.forEach((function(t){u(r,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(r,i)})),e._dbSchema=i,Un(e,[e._allTables,e,e.Transaction.prototype]),Kn(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],o(i),i),e._storeNames=o(i),this},t.prototype.upgrade=function(t){return this._cfg.contentUpgrade=t,this},t}();function nr(t){return Ye(er.prototype,(function(e){this.db=t,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function rr(t){var e,n=t&&"function"===typeof t.databases;if(!n){var r=new pr(Ue,{addons:[]});r.version(1).stores({dbnames:"name"}),e=r.table("dbnames")}return{getDatabaseNames:function(){return n?Wt.resolve(t.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return t!==Ue}))})):e.toCollection().primaryKeys()},add:function(t){return!n&&t!==Ue&&e.put({name:t}).catch(ct)},remove:function(t){return!n&&t!==Ue&&e.delete(t).catch(ct)}}}function or(t){try{tr=rr(t)}catch(e){}}function ir(t){return pe((function(){return Kt.letThrough=!0,t()}))}function ar(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?Ee(e.dbOpenError):t}));W&&(e.openCanceller._stackHolder=G()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.dbReadyResolve,o=null;return Wt.race([e.openCanceller,new Wt((function(r,i){if(!n)throw new it.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var a=t.name,u=e.autoSchema?n.open(a):n.open(a,Math.round(10*t.verno));if(!u)throw new it.MissingAPI("IndexedDB API not available");u.onerror=_n(i),u.onblocked=ue(t._fireOnBlocked),u.onupgradeneeded=ue((function(r){if(o=u.transaction,e.autoSchema&&!t._options.allowEmptyDB){u.onerror=xn,o.abort(),u.result.close();var s=n.deleteDatabase(a);s.onsuccess=s.onerror=ue((function(){i(new it.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{o.onerror=_n(i);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;t.idbdb=u.result,Nn(t,c/10,o,i)}}),i),u.onsuccess=ue((function(){o=null;var n=t.idbdb=u.result,i=g(n.objectStoreNames);if(i.length>0)try{var s=n.transaction(mn(i),"readonly");e.autoSchema?Qn(t,n,s):(Jn(t,t._dbSchema,s),Xn(t,s)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ln(t,s)}catch(c){}De.push(t),n.onversionchange=ue((function(n){e.vcFired=!0,t.on("versionchange").fire(n)})),tr.add(a),r()}),i)}))]).then((function(){return e.onReadyBeingFired=[],Wt.resolve(ir(t.on.ready.fire)).then((function t(){if(e.onReadyBeingFired.length>0){var n=e.onReadyBeingFired.reduce(bt,ct);return e.onReadyBeingFired=[],Wt.resolve(ir(n)).then(t)}}))})).finally((function(){e.onReadyBeingFired=null})).then((function(){return e.isBeingOpened=!1,t})).catch((function(n){try{o&&o.abort()}catch(r){}return e.isBeingOpened=!1,t.close(),e.dbOpenError=n,Ee(e.dbOpenError)})).finally((function(){e.openComplete=!0,r()}))}function ur(t){var e=function(e){return t.next(e)},n=function(e){return t.throw(e)},r=a(e),o=a(n);function a(t){return function(e){var n=t(e),a=n.value;return n.done?a:a&&"function"===typeof a.then?a.then(r,o):i(a)?Promise.all(a).then(r,o):r(a)}}return a(e)()}function sr(t,e,n){var r=arguments.length;if(r<2)throw new it.InvalidArgument("Too few arguments");var o=new Array(r-1);while(--r)o[r-1]=arguments[r];n=o.pop();var i=j(o);return[t,i,n]}function cr(t,e,n,r,o){return Wt.resolve().then((function(){var i=Kt.transless||Kt,a=t._createTransaction(e,n,t._dbSchema,r),u={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create();var s,c=N(o);c&&ve();var f=Wt.follow((function(){if(s=o.call(a,a),s)if(c){var t=ye.bind(null,null);s.then(t,t)}else"function"===typeof s.next&&"function"===typeof s.throw&&(s=ur(s))}),u);return(s&&"function"===typeof s.then?Wt.resolve(s).then((function(t){return a.active?t:Ee(new it.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):f.then((function(){return s}))).then((function(t){return r&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),Ee(t)}))}))}function fr(t,e,n){for(var r=i(t)?t.slice():[t],o=0;o<n;++o)r.push(e);return r}function lr(t){return n(n({},t),{table:function(e){var r=t.table(e),o=r.schema,i={},a=[];function u(t,e,r){var o=Bn(t),s=i[o]=i[o]||[],c=null==t?0:"string"===typeof t?1:t.length,f=e>0,l=n(n({},r),{isVirtual:f,isPrimaryKey:!f&&r.isPrimaryKey,keyTail:e,keyLength:c,extractKey:En(t),unique:!f&&r.unique});if(s.push(l),l.isPrimaryKey||a.push(l),c>1){var h=2===c?t[0]:t.slice(0,c-1);u(h,e+1,r)}return s.sort((function(t,e){return t.keyTail-e.keyTail})),l}var s=u(o.primaryKey.keyPath,0,o.primaryKey);i[":id"]=[s];for(var c=0,f=o.indexes;c<f.length;c++){var l=f[c];u(l.keyPath,0,l)}function h(t){var e=i[Bn(t)];return e&&e[0]}function d(e,n){return{type:1===e.type?2:e.type,lower:fr(e.lower,e.lowerOpen?t.MAX_KEY:t.MIN_KEY,n),lowerOpen:!0,upper:fr(e.upper,e.upperOpen?t.MIN_KEY:t.MAX_KEY,n),upperOpen:!0}}function p(t){var e=t.query.index;return e.isVirtual?n(n({},t),{query:{index:e,range:d(t.query.range,e.keyTail)}}):t}var v=n(n({},r),{schema:n(n({},o),{primaryKey:s,indexes:a,getIndexByKeyPath:h}),count:function(t){return r.count(p(t))},query:function(t){return r.query(p(t))},openCursor:function(e){var n=e.query.index,o=n.keyTail,i=n.isVirtual,a=n.keyLength;if(!i)return r.openCursor(e);function u(n){function r(r){null!=r?n.continue(fr(r,e.reverse?t.MAX_KEY:t.MIN_KEY,o)):e.unique?n.continue(fr(n.key,e.reverse?t.MIN_KEY:t.MAX_KEY,o)):n.continue()}var i=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(fr(e,t.MAX_KEY,o),r)}},key:{get:function(){var t=n.key;return 1===a?t[0]:t.slice(0,a)}},value:{get:function(){return n.value}}});return i}return r.openCursor(p(e)).then((function(t){return t&&u(t)}))}});return v}})}var hr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:lr},dr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return n(n({},t),{table:function(e){var o=t.table(e),i=o.schema.primaryKey,a=n(n({},o),{mutate:function(t){var a=Kt.trans,u=a.table(e).hook,s=u.deleting,c=u.creating,l=u.updating;switch(t.type){case"add":if(c.fire===ct)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"put":if(c.fire===ct&&l.fire===ct)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"delete":if(s.fire===ct)break;return a._promise("readwrite",(function(){return h(t)}),!0);case"deleteRange":if(s.fire===ct)break;return a._promise("readwrite",(function(){return d(t)}),!0)}return o.mutate(t);function h(t){var e=Kt.trans,a=t.keys||Tn(i,t);if(!a)throw new Error("Keys missing");return t="add"===t.type||"put"===t.type?n(n({},t),{keys:a,wantResults:!0}):n({},t),"delete"!==t.type&&(t.values=r(t.values)),t.keys&&(t.keys=r(t.keys)),Rn(o,t,a).then((function(n){var r=a.map((function(r,o){var a=n[o],u={onerror:null,onsuccess:null};if("delete"===t.type)s.fire.call(u,r,a,e);else if("add"===t.type||void 0===a){var h=c.fire.call(u,r,t.values[o],e);null==r&&null!=h&&(r=h,t.keys[o]=r,i.outbound||S(t.values[o],i.keyPath,r))}else{var d=M(a,t.values[o]),p=l.fire.call(u,d,r,a,e);if(p){var v=t.values[o];Object.keys(p).forEach((function(t){f(v,t)?v[t]=p[t]:S(v,t,p[t])}))}}return u}));return o.mutate(t).then((function(e){for(var o=e.failures,i=e.results,u=e.numFailures,s=e.lastResult,c=0;c<a.length;++c){var f=i?i[c]:a[c],l=r[c];null==f?l.onerror&&l.onerror(o[c]):l.onsuccess&&l.onsuccess("put"===t.type&&n[c]?t.values[c]:f)}return{failures:o,results:i,numFailures:u,lastResult:s}})).catch((function(t){return r.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}function d(t){return p(t.trans,t.range,1e4)}function p(t,e,r){return o.query({trans:t,values:!1,query:{index:i,range:e},limit:r}).then((function(o){var i=o.result;return h({type:"delete",keys:i,trans:t}).then((function(o){return o.numFailures>0?Promise.reject(o.failures[0]):i.length<r?{failures:[],numFailures:0,lastResult:void 0}:p(t,n(n({},e),{lower:i[i.length-1],lowerOpen:!0}),r)}))}))}}});return a}})}},pr=function(){function t(e,r){var o=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=r=n({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var a=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ct,dbReadyPromise:null,cancelOpen:ct,openCanceller:null,autoSchema:!0};u.dbReadyPromise=new Wt((function(t){u.dbReadyResolve=t})),u.openCanceller=new Wt((function(t,e){u.cancelOpen=e})),this._state=u,this.name=e,this.on=Ge(this,"populate","blocked","versionchange",{ready:[bt,ct]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(e){return function(n,r){t.vip((function(){var t=o._state;if(t.openComplete)t.dbOpenError||Wt.resolve().then(n),r&&e(n);else if(t.onReadyBeingFired)t.onReadyBeingFired.push(n),r&&e(n);else{e(n);var i=o;r||e((function t(){i.on.ready.unsubscribe(n),i.on.ready.unsubscribe(t)}))}}))}})),this.Collection=an(this),this.Table=$e(this),this.Transaction=An(this),this.Version=nr(this),this.WhereClause=gn(this),this.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+o.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+o.name+"'. Closing db now to resume the delete request."),o.close()})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+o.name+"') was blocked"):console.warn("Upgrade '"+o.name+"' blocked by other connection holding version "+t.oldVersion/10)})),this._maxKey=wn(r.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new o.Transaction(t,e,n,r)},this._fireOnBlocked=function(t){o.on("blocked").fire(t),De.filter((function(t){return t.name===o.name&&t!==o&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(hr),this.use(dr),a.forEach((function(t){return t(o)}))}return t.prototype.version=function(t){if(isNaN(t)||t<.1)throw new it.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new it.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter((function(e){return e._cfg.version===t}))[0];return n||(n=new this.Version(t),e.push(n),e.sort(qn),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(t){var e=this;return this._state.openComplete||Kt.letThrough?t():new Wt((function(t,n){if(!e._state.isBeingOpened){if(!e._options.autoOpen)return void n(new it.DatabaseClosed);e.open().catch(ct)}e._state.dbReadyPromise.then(t,n)})).then(t)},t.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,o=t.name;o&&this.unuse({stack:e,name:o});var i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:n,level:null==r?10:r,name:o}),i.sort((function(t,e){return t.level-e.level})),this},t.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return r?t.create!==r:!!n&&t.name!==n}))),this},t.prototype.open=function(){return ar(this)},t.prototype.close=function(){var t=De.indexOf(this),e=this._state;if(t>=0&&De.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}this._options.autoOpen=!1,e.dbOpenError=new it.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError),e.dbReadyPromise=new Wt((function(t){e.dbReadyResolve=t})),e.openCanceller=new Wt((function(t,n){e.cancelOpen=n}))},t.prototype.delete=function(){var t=this,e=arguments.length>0,n=this._state;return new Wt((function(r,o){var i=function(){t.close();var e=t._deps.indexedDB.deleteDatabase(t.name);e.onsuccess=ue((function(){tr.remove(t.name),r()})),e.onerror=_n(o),e.onblocked=t._fireOnBlocked};if(e)throw new it.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()}))},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return null!==this.idbdb},t.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var t=this;return o(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!0,configurable:!0}),t.prototype.transaction=function(){var t=sr.apply(this,arguments);return this._transaction.apply(this,t)},t.prototype._transaction=function(t,e,n){var r=this,o=Kt.trans;o&&o.db===this&&-1===t.indexOf("!")||(o=null);var i,a,u=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(a=e.map((function(t){var e=t instanceof r.Table?t.name:t;if("string"!==typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==t||t===qe)i=qe;else{if("rw"!=t&&t!=Ne)throw new it.InvalidArgument("Invalid transaction mode: "+t);i=Ne}if(o){if(o.mode===qe&&i===Ne){if(!u)throw new it.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&a.forEach((function(t){if(o&&-1===o.storeNames.indexOf(t)){if(!u)throw new it.SubTransaction("Table "+t+" not included in parent transaction.");o=null}})),u&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,(function(t,e){e(c)})):Ee(c)}var s=cr.bind(null,this,i,a,o,n);return o?o._promise(i,s,"lock"):Kt.trans?xe(Kt.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},t.prototype.table=function(t){if(!f(this._allTables,t))throw new it.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},t}(),vr=pr;l(vr,n(n({},st),{delete:function(t){var e=new vr(t);return e.delete()},exists:function(t){return new vr(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){return tr?tr.getDatabaseNames().then(t):Wt.resolve([])},defineClass:function(){function t(t){u(this,t)}return t},ignoreTransaction:function(t){return Kt.trans?xe(Kt.transless,t):t()},vip:ir,async:function(t){return function(){try{var e=ur(t.apply(this,arguments));return e&&"function"===typeof e.then?e:Wt.resolve(e)}catch(n){return Ee(n)}}},spawn:function(t,e,n){try{var r=ur(t.apply(n,e||[]));return r&&"function"===typeof r.then?r:Wt.resolve(r)}catch(o){return Ee(o)}},currentTransaction:{get:function(){return Kt.trans||null}},waitFor:function(t,e){var n=Wt.resolve("function"===typeof t?vr.ignoreTransaction(t):t).timeout(e||6e4);return Kt.trans?Kt.trans.waitFor(n):n},Promise:Wt,debug:{get:function(){return W},set:function(t){H(t,"dexie"===t?function(){return!0}:Ke)}},derive:p,extend:u,props:l,override:m,Events:Ge,getByKeyPath:A,setByKeyPath:S,delByKeyPath:O,shallowClone:P,deepClone:C,getObjectDiff:M,asap:_,minKey:Ie,addons:[],connections:De,errnames:rt,dependencies:function(){try{return{indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Te,version:Te.split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:vr,Dexie:vr})),vr.maxKey=wn(vr.dependencies.IDBKeyRange),or(pr.dependencies.indexedDB),Wt.rejectionMapper=ut,H(W,Ke),e["a"]=pr}).call(this,n("c8ba"))},"4df4":function(t,e,n){"use strict";var r=n("0366"),o=n("c65b"),i=n("7b0b"),a=n("9bdd"),u=n("e95a"),s=n("68ee"),c=n("07fa"),f=n("8418"),l=n("9a1f"),h=n("35a1"),d=Array;t.exports=function(t){var e=i(t),n=s(this),p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v;y&&(v=r(v,p>2?arguments[2]:void 0));var b,g,m,w,_,x,k=h(e),A=0;if(!k||this===d&&u(k))for(b=c(e),g=n?new this(b):d(b);b>A;A++)x=y?v(e[A],A):e[A],f(g,A,x);else for(w=l(e,k),_=w.next,g=n?new this:[];!(m=o(_,w)).done;A++)x=y?a(w,v,[m.value,A],!0):m.value,f(g,A,x);return g.length=A,g}},5087:function(t,e,n){var r=n("68ee"),o=n("0d51"),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a constructor")}},"50c4":function(t,e,n){var r=n("5926"),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},"512c":function(t,e,n){var r=n("342f"),o=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},5352:function(t,e,n){"use strict";n("e260");var r=n("23e7"),o=n("da84"),i=n("c65b"),a=n("e330"),u=n("83ab"),s=n("f354"),c=n("cb2d"),f=n("edd0"),l=n("6964"),h=n("d44e"),d=n("dcc3"),p=n("69f3"),v=n("19aa"),y=n("1626"),b=n("1a2d"),g=n("0366"),m=n("f5df"),w=n("825a"),_=n("861d"),x=n("577e"),k=n("7c73"),A=n("5c6c"),S=n("9a1f"),O=n("35a1"),P=n("d6d6"),E=n("b622"),j=n("addb"),T=E("iterator"),R="URLSearchParams",I=R+"Iterator",C=p.set,B=p.getterFor(R),D=p.getterFor(I),F=Object.getOwnPropertyDescriptor,M=function(t){if(!u)return o[t];var e=F(o,t);return e&&e.value},L=M("fetch"),K=M("Request"),U=M("Headers"),q=K&&K.prototype,N=U&&U.prototype,W=o.RegExp,H=o.TypeError,V=o.decodeURIComponent,z=o.encodeURIComponent,G=a("".charAt),Y=a([].join),$=a([].push),Q=a("".replace),X=a([].shift),J=a([].splice),Z=a("".split),tt=a("".slice),et=/\+/g,nt=Array(4),rt=function(t){return nt[t-1]||(nt[t-1]=W("((?:%[\\da-f]{2}){"+t+"})","gi"))},ot=function(t){try{return V(t)}catch(e){return t}},it=function(t){var e=Q(t,et," "),n=4;try{return V(e)}catch(r){while(n)e=Q(e,rt(n--),ot);return e}},at=/[!'()~]|%20/g,ut={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},st=function(t){return ut[t]},ct=function(t){return Q(z(t),at,st)},ft=d((function(t,e){C(this,{type:I,iterator:S(B(t).entries),kind:e})}),"Iterator",(function(){var t=D(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),!0),lt=function(t){this.entries=[],this.url=null,void 0!==t&&(_(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===G(t,0)?tt(t,1):t:x(t)))};lt.prototype={type:R,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,a,u,s,c=O(t);if(c){e=S(t,c),n=e.next;while(!(r=i(n,e)).done){if(o=S(w(r.value)),a=o.next,(u=i(a,o)).done||(s=i(a,o)).done||!i(a,o).done)throw H("Expected sequence with length 2");$(this.entries,{key:x(u.value),value:x(s.value)})}}else for(var f in t)b(t,f)&&$(this.entries,{key:f,value:x(t[f])})},parseQuery:function(t){if(t){var e,n,r=Z(t,"&"),o=0;while(o<r.length)e=r[o++],e.length&&(n=Z(e,"="),$(this.entries,{key:it(X(n)),value:it(Y(n,"="))}))}},serialize:function(){var t,e=this.entries,n=[],r=0;while(r<e.length)t=e[r++],$(n,ct(t.key)+"="+ct(t.value));return Y(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ht=function(){v(this,dt);var t=arguments.length>0?arguments[0]:void 0,e=C(this,new lt(t));u||(this.length=e.entries.length)},dt=ht.prototype;if(l(dt,{append:function(t,e){P(arguments.length,2);var n=B(this);$(n.entries,{key:x(t),value:x(e)}),u||this.length++,n.updateURL()},delete:function(t){P(arguments.length,1);var e=B(this),n=e.entries,r=x(t),o=0;while(o<n.length)n[o].key===r?J(n,o,1):o++;u||(this.length=n.length),e.updateURL()},get:function(t){P(arguments.length,1);for(var e=B(this).entries,n=x(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){P(arguments.length,1);for(var e=B(this).entries,n=x(t),r=[],o=0;o<e.length;o++)e[o].key===n&&$(r,e[o].value);return r},has:function(t){P(arguments.length,1);var e=B(this).entries,n=x(t),r=0;while(r<e.length)if(e[r++].key===n)return!0;return!1},set:function(t,e){P(arguments.length,1);for(var n,r=B(this),o=r.entries,i=!1,a=x(t),s=x(e),c=0;c<o.length;c++)n=o[c],n.key===a&&(i?J(o,c--,1):(i=!0,n.value=s));i||$(o,{key:a,value:s}),u||(this.length=o.length),r.updateURL()},sort:function(){var t=B(this);j(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){var e,n=B(this).entries,r=g(t,arguments.length>1?arguments[1]:void 0),o=0;while(o<n.length)e=n[o++],r(e.value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),c(dt,T,dt.entries,{name:"entries"}),c(dt,"toString",(function(){return B(this).serialize()}),{enumerable:!0}),u&&f(dt,"size",{get:function(){return B(this).entries.length},configurable:!0,enumerable:!0}),h(ht,R),r({global:!0,constructor:!0,forced:!s},{URLSearchParams:ht}),!s&&y(U)){var pt=a(N.has),vt=a(N.set),yt=function(t){if(_(t)){var e,n=t.body;if(m(n)===R)return e=t.headers?new U(t.headers):new U,pt(e,"content-type")||vt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),k(t,{body:A(0,x(n)),headers:A(0,e)})}return t};if(y(L)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return L(t,arguments.length>1?yt(arguments[1]):{})}}),y(K)){var bt=function(t){return v(this,q),new K(t,arguments.length>1?yt(arguments[1]):{})};q.constructor=bt,bt.prototype=q,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:bt})}}t.exports={URLSearchParams:ht,getState:B}},5692:function(t,e,n){var r=n("c430"),o=n("c6cd");(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.1",mode:r?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(t,e,n){var r=n("d066"),o=n("e330"),i=n("241c"),a=n("7418"),u=n("825a"),s=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(u(t)),n=a.f;return n?s(e,n(t)):e}},"577e":function(t,e,n){var r=n("f5df"),o=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return o(t)}},5926:function(t,e,n){var r=n("b42e");t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},"59ed":function(t,e,n){var r=n("1626"),o=n("0d51"),i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not a function")}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5cc6":function(t,e,n){var r=n("74e8");r("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},"5e77":function(t,e,n){var r=n("83ab"),o=n("1a2d"),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,u=o(i,"name"),s=u&&"something"===function(){}.name,c=u&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:u,PROPER:s,CONFIGURABLE:c}},"5fb2":function(t,e,n){var r=n("e330"),o=2147483647,i=36,a=1,u=26,s=38,c=700,f=72,l=128,h="-",d=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,v="Overflow: input needs wider integers to process",y=i-a,b=RangeError,g=r(p.exec),m=Math.floor,w=String.fromCharCode,_=r("".charCodeAt),x=r([].join),k=r([].push),A=r("".replace),S=r("".split),O=r("".toLowerCase),P=function(t){var e=[],n=0,r=t.length;while(n<r){var o=_(t,n++);if(o>=55296&&o<=56319&&n<r){var i=_(t,n++);56320==(64512&i)?k(e,((1023&o)<<10)+(1023&i)+65536):(k(e,o),n--)}else k(e,o)}return e},E=function(t){return t+22+75*(t<26)},j=function(t,e,n){var r=0;t=n?m(t/c):t>>1,t+=m(t/e);while(t>y*u>>1)t=m(t/y),r+=i;return m(r+(y+1)*t/(t+s))},T=function(t){var e=[];t=P(t);var n,r,s=t.length,c=l,d=0,p=f;for(n=0;n<t.length;n++)r=t[n],r<128&&k(e,w(r));var y=e.length,g=y;y&&k(e,h);while(g<s){var _=o;for(n=0;n<t.length;n++)r=t[n],r>=c&&r<_&&(_=r);var A=g+1;if(_-c>m((o-d)/A))throw b(v);for(d+=(_-c)*A,c=_,n=0;n<t.length;n++){if(r=t[n],r<c&&++d>o)throw b(v);if(r==c){var S=d,O=i;while(1){var T=O<=p?a:O>=p+u?u:O-p;if(S<T)break;var R=S-T,I=i-T;k(e,w(E(T+R%I))),S=m(R/I),O+=i}k(e,w(E(S))),p=j(d,A,g==y),d=0,g++}}d++,c++}return x(e,"")};t.exports=function(t){var e,n,r=[],o=S(A(O(t),p,"."),".");for(e=0;e<o.length;e++)n=o[e],k(r,g(d,n)?"xn--"+T(n):n);return x(r,".")}},"60da":function(t,e,n){"use strict";var r=n("83ab"),o=n("e330"),i=n("c65b"),a=n("d039"),u=n("df75"),s=n("7418"),c=n("d1e7"),f=n("7b0b"),l=n("44ad"),h=Object.assign,d=Object.defineProperty,p=o([].concat);t.exports=!h||a((function(){if(r&&1!==h({b:1},h(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!=h({},t)[n]||u(h({},e)).join("")!=o}))?function(t,e){var n=f(t),o=arguments.length,a=1,h=s.f,d=c.f;while(o>a){var v,y=l(arguments[a++]),b=h?p(u(y),h(y)):u(y),g=b.length,m=0;while(g>m)v=b[m++],r&&!i(d,y,v)||(n[v]=y[v])}return n}:h},"621a":function(t,e,n){"use strict";var r=n("da84"),o=n("e330"),i=n("83ab"),a=n("4b11"),u=n("5e77"),s=n("9112"),c=n("edd0"),f=n("6964"),l=n("d039"),h=n("19aa"),d=n("5926"),p=n("50c4"),v=n("0b25"),y=n("77a7"),b=n("e163"),g=n("d2bb"),m=n("241c").f,w=n("81d5"),_=n("4dae"),x=n("d44e"),k=n("69f3"),A=u.PROPER,S=u.CONFIGURABLE,O="ArrayBuffer",P="DataView",E="prototype",j="Wrong length",T="Wrong index",R=k.getterFor(O),I=k.getterFor(P),C=k.set,B=r[O],D=B,F=D&&D[E],M=r[P],L=M&&M[E],K=Object.prototype,U=r.Array,q=r.RangeError,N=o(w),W=o([].reverse),H=y.pack,V=y.unpack,z=function(t){return[255&t]},G=function(t){return[255&t,t>>8&255]},Y=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},$=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Q=function(t){return H(t,23,4)},X=function(t){return H(t,52,8)},J=function(t,e,n){c(t[E],e,{configurable:!0,get:function(){return n(this)[e]}})},Z=function(t,e,n,r){var o=v(n),i=I(t);if(o+e>i.byteLength)throw q(T);var a=i.bytes,u=o+i.byteOffset,s=_(a,u,u+e);return r?s:W(s)},tt=function(t,e,n,r,o,i){var a=v(n),u=I(t);if(a+e>u.byteLength)throw q(T);for(var s=u.bytes,c=a+u.byteOffset,f=r(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(a){var et=A&&B.name!==O;if(l((function(){B(1)}))&&l((function(){new B(-1)}))&&!l((function(){return new B,new B(1.5),new B(NaN),1!=B.length||et&&!S})))et&&S&&s(B,"name",O);else{D=function(t){return h(this,F),new B(v(t))},D[E]=F;for(var nt,rt=m(B),ot=0;rt.length>ot;)(nt=rt[ot++])in D||s(D,nt,B[nt]);F.constructor=D}g&&b(L)!==K&&g(L,K);var it=new M(new D(2)),at=o(L.setInt8);it.setInt8(0,2147483648),it.setInt8(1,2147483649),!it.getInt8(0)&&it.getInt8(1)||f(L,{setInt8:function(t,e){at(this,t,e<<24>>24)},setUint8:function(t,e){at(this,t,e<<24>>24)}},{unsafe:!0})}else D=function(t){h(this,F);var e=v(t);C(this,{type:O,bytes:N(U(e),0),byteLength:e}),i||(this.byteLength=e,this.detached=!1)},F=D[E],M=function(t,e,n){h(this,L),h(t,F);var r=R(t),o=r.byteLength,a=d(e);if(a<0||a>o)throw q("Wrong offset");if(n=void 0===n?o-a:p(n),a+n>o)throw q(j);C(this,{type:P,buffer:t,byteLength:n,byteOffset:a,bytes:r.bytes}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},L=M[E],i&&(J(D,"byteLength",R),J(M,"buffer",I),J(M,"byteLength",I),J(M,"byteOffset",I)),f(L,{getInt8:function(t){return Z(this,1,t)[0]<<24>>24},getUint8:function(t){return Z(this,1,t)[0]},getInt16:function(t){var e=Z(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Z(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return $(Z(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return $(Z(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return V(Z(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return V(Z(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){tt(this,1,t,z,e)},setUint8:function(t,e){tt(this,1,t,z,e)},setInt16:function(t,e){tt(this,2,t,G,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){tt(this,2,t,G,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){tt(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){tt(this,4,t,Y,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){tt(this,4,t,Q,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){tt(this,8,t,X,e,arguments.length>2?arguments[2]:void 0)}});x(D,O),x(M,P),t.exports={ArrayBuffer:D,DataView:M}},6374:function(t,e,n){var r=n("da84"),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},6547:function(t,e,n){var r=n("e330"),o=n("5926"),i=n("577e"),a=n("1d80"),u=r("".charAt),s=r("".charCodeAt),c=r("".slice),f=function(t){return function(e,n){var r,f,l=i(a(e)),h=o(n),d=l.length;return h<0||h>=d?t?"":void 0:(r=s(l,h),r<55296||r>56319||h+1===d||(f=s(l,h+1))<56320||f>57343?t?u(l,h):r:t?c(l,h,h+2):f-56320+(r-55296<<10)+65536)}};t.exports={codeAt:f(!1),charAt:f(!0)}},"65f0":function(t,e,n){var r=n("0b42");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},"68ee":function(t,e,n){var r=n("e330"),o=n("d039"),i=n("1626"),a=n("f5df"),u=n("d066"),s=n("8925"),c=function(){},f=[],l=u("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=r(h.exec),p=!h.exec(c),v=function(t){if(!i(t))return!1;try{return l(c,f,t),!0}catch(e){return!1}},y=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(h,s(t))}catch(e){return!0}};y.sham=!0,t.exports=!l||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?y:v},6964:function(t,e,n){var r=n("cb2d");t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},"69f3":function(t,e,n){var r,o,i,a=n("cdce"),u=n("da84"),s=n("861d"),c=n("9112"),f=n("1a2d"),l=n("c6cd"),h=n("f772"),d=n("d012"),p="Object already initialized",v=u.TypeError,y=u.WeakMap,b=function(t){return i(t)?o(t):r(t,{})},g=function(t){return function(e){var n;if(!s(e)||(n=o(e)).type!==t)throw v("Incompatible receiver, "+t+" required");return n}};if(a||l.state){var m=l.state||(l.state=new y);m.get=m.get,m.has=m.has,m.set=m.set,r=function(t,e){if(m.has(t))throw v(p);return e.facade=t,m.set(t,e),e},o=function(t){return m.get(t)||{}},i=function(t){return m.has(t)}}else{var w=h("state");d[w]=!0,r=function(t,e){if(f(t,w))throw v(p);return e.facade=t,c(t,w,e),e},o=function(t){return f(t,w)?t[w]:{}},i=function(t){return f(t,w)}}t.exports={set:r,get:o,has:i,enforce:b,getterFor:g}},7156:function(t,e,n){var r=n("1626"),o=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var a,u;return i&&r(a=e.constructor)&&a!==n&&o(u=a.prototype)&&u!==n.prototype&&i(t,u),t}},7234:function(t,e){t.exports=function(t){return null===t||void 0===t}},7282:function(t,e,n){var r=n("e330"),o=n("59ed");t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(i){}}},"735e":function(t,e,n){"use strict";var r=n("ebb5"),o=n("81d5"),i=n("f495"),a=n("f5df"),u=n("c65b"),s=n("e330"),c=n("d039"),f=r.aTypedArray,l=r.exportTypedArrayMethod,h=s("".slice),d=c((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}));l("fill",(function(t){var e=arguments.length;f(this);var n="Big"===h(a(this),0,3)?i(t):+t;return u(o,this,n,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),d)},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"74e8":function(t,e,n){"use strict";var r=n("23e7"),o=n("da84"),i=n("c65b"),a=n("83ab"),u=n("8aa7"),s=n("ebb5"),c=n("621a"),f=n("19aa"),l=n("5c6c"),h=n("9112"),d=n("eac5"),p=n("50c4"),v=n("0b25"),y=n("182d"),b=n("a04b"),g=n("1a2d"),m=n("f5df"),w=n("861d"),_=n("d9b5"),x=n("7c73"),k=n("3a9b"),A=n("d2bb"),S=n("241c").f,O=n("a078"),P=n("b727").forEach,E=n("2626"),j=n("edd0"),T=n("9bf2"),R=n("06cf"),I=n("69f3"),C=n("7156"),B=I.get,D=I.set,F=I.enforce,M=T.f,L=R.f,K=Math.round,U=o.RangeError,q=c.ArrayBuffer,N=q.prototype,W=c.DataView,H=s.NATIVE_ARRAY_BUFFER_VIEWS,V=s.TYPED_ARRAY_TAG,z=s.TypedArray,G=s.TypedArrayPrototype,Y=s.aTypedArrayConstructor,$=s.isTypedArray,Q="BYTES_PER_ELEMENT",X="Wrong length",J=function(t,e){Y(t);var n=0,r=e.length,o=new t(r);while(r>n)o[n]=e[n++];return o},Z=function(t,e){j(t,e,{configurable:!0,get:function(){return B(this)[e]}})},tt=function(t){var e;return k(N,t)||"ArrayBuffer"==(e=m(t))||"SharedArrayBuffer"==e},et=function(t,e){return $(t)&&!_(e)&&e in t&&d(+e)&&e>=0},nt=function(t,e){return e=b(e),et(t,e)?l(2,t[e]):L(t,e)},rt=function(t,e,n){return e=b(e),!(et(t,e)&&w(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?M(t,e,n):(t[e]=n.value,t)};a?(H||(R.f=nt,T.f=rt,Z(G,"buffer"),Z(G,"byteOffset"),Z(G,"byteLength"),Z(G,"length")),r({target:"Object",stat:!0,forced:!H},{getOwnPropertyDescriptor:nt,defineProperty:rt}),t.exports=function(t,e,n){var a=t.match(/\d+/)[0]/8,s=t+(n?"Clamped":"")+"Array",c="get"+t,l="set"+t,d=o[s],b=d,g=b&&b.prototype,m={},_=function(t,e){var n=B(t);return n.view[c](e*a+n.byteOffset,!0)},k=function(t,e,r){var o=B(t);n&&(r=(r=K(r))<0?0:r>255?255:255&r),o.view[l](e*a+o.byteOffset,r,!0)},j=function(t,e){M(t,e,{get:function(){return _(this,e)},set:function(t){return k(this,e,t)},enumerable:!0})};H?u&&(b=e((function(t,e,n,r){return f(t,g),C(function(){return w(e)?tt(e)?void 0!==r?new d(e,y(n,a),r):void 0!==n?new d(e,y(n,a)):new d(e):$(e)?J(b,e):i(O,b,e):new d(v(e))}(),t,b)})),A&&A(b,z),P(S(d),(function(t){t in b||h(b,t,d[t])})),b.prototype=g):(b=e((function(t,e,n,r){f(t,g);var o,u,s,c=0,l=0;if(w(e)){if(!tt(e))return $(e)?J(b,e):i(O,b,e);o=e,l=y(n,a);var h=e.byteLength;if(void 0===r){if(h%a)throw U(X);if(u=h-l,u<0)throw U(X)}else if(u=p(r)*a,u+l>h)throw U(X);s=u/a}else s=v(e),u=s*a,o=new q(u);D(t,{buffer:o,byteOffset:l,byteLength:u,length:s,view:new W(o)});while(c<s)j(t,c++)})),A&&A(b,z),g=b.prototype=x(G)),g.constructor!==b&&h(g,"constructor",b),F(g).TypedArrayConstructor=b,V&&h(g,V,s);var T=b!=d;m[s]=b,r({global:!0,constructor:!0,forced:T,sham:!H},m),Q in b||h(b,Q,a),Q in g||h(g,Q,a),E(s)}):t.exports=function(){}},"77a7":function(t,e){var n=Array,r=Math.abs,o=Math.pow,i=Math.floor,a=Math.log,u=Math.LN2,s=function(t,e,s){var c,f,l,h=n(s),d=8*s-e-1,p=(1<<d)-1,v=p>>1,y=23===e?o(2,-24)-o(2,-77):0,b=t<0||0===t&&1/t<0?1:0,g=0;t=r(t),t!=t||t===1/0?(f=t!=t?1:0,c=p):(c=i(a(t)/u),l=o(2,-c),t*l<1&&(c--,l*=2),t+=c+v>=1?y/l:y*o(2,1-v),t*l>=2&&(c++,l/=2),c+v>=p?(f=0,c=p):c+v>=1?(f=(t*l-1)*o(2,e),c+=v):(f=t*o(2,v-1)*o(2,e),c=0));while(e>=8)h[g++]=255&f,f/=256,e-=8;c=c<<e|f,d+=e;while(d>0)h[g++]=255&c,c/=256,d-=8;return h[--g]|=128*b,h},c=function(t,e){var n,r=t.length,i=8*r-e-1,a=(1<<i)-1,u=a>>1,s=i-7,c=r-1,f=t[c--],l=127&f;f>>=7;while(s>0)l=256*l+t[c--],s-=8;n=l&(1<<-s)-1,l>>=-s,s+=e;while(s>0)n=256*n+t[c--],s-=8;if(0===l)l=1-u;else{if(l===a)return n?NaN:f?-1/0:1/0;n+=o(2,e),l-=u}return(f?-1:1)*n*o(2,l-e)};t.exports={pack:s,unpack:c}},"77d9":function(t,e,n){n("1d02")},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(t,e,n){var r=n("cc12"),o=r("span").classList,i=o&&o.constructor&&o.constructor.prototype;t.exports=i===Object.prototype?void 0:i},"7b0b":function(t,e,n){var r=n("1d80"),o=Object;t.exports=function(t){return o(r(t))}},"7c73":function(t,e,n){var r,o=n("825a"),i=n("37e8"),a=n("7839"),u=n("d012"),s=n("1be4"),c=n("cc12"),f=n("f772"),l=">",h="<",d="prototype",p="script",v=f("IE_PROTO"),y=function(){},b=function(t){return h+p+l+t+h+"/"+p+l},g=function(t){t.write(b("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",s.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(b("document.F=Object")),t.close(),t.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}w="undefined"!=typeof document?document.domain&&r?g(r):m():g(r);var t=a.length;while(t--)delete w[d][a[t]];return w()};u[v]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(y[d]=o(t),n=new y,y[d]=null,n[v]=t):n=w(),void 0===e?n:i.f(n,e)}},"81d5":function(t,e,n){"use strict";var r=n("7b0b"),o=n("23cb"),i=n("07fa");t.exports=function(t){var e=r(this),n=i(e),a=arguments.length,u=o(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:o(s,n);while(c>u)e[u++]=t;return e}},"825a":function(t,e,n){var r=n("861d"),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw i(o(t)+" is not an object")}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var r=n("a04b"),o=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},"861d":function(t,e,n){var r=n("1626"),o=n("8ea1"),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===i}:function(t){return"object"==typeof t?null!==t:r(t)}},8925:function(t,e,n){var r=n("e330"),o=n("1626"),i=n("c6cd"),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},"8aa7":function(t,e,n){var r=n("da84"),o=n("d039"),i=n("1c7e"),a=n("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,u=r.ArrayBuffer,s=r.Int8Array;t.exports=!a||!o((function(){s(1)}))||!o((function(){new s(-1)}))||!i((function(t){new s,new s(null),new s(1.5),new s(t)}),!0)||o((function(){return 1!==new s(new u(2),1,void 0).length}))},"8ea1":function(t,e){var n="object"==typeof document&&document.all,r="undefined"==typeof n&&void 0!==n;t.exports={all:n,IS_HTMLDDA:r}},"907a":function(t,e,n){"use strict";var r=n("ebb5"),o=n("07fa"),i=n("5926"),a=r.aTypedArray,u=r.exportTypedArrayMethod;u("at",(function(t){var e=a(this),n=o(e),r=i(t),u=r>=0?r:n+r;return u<0||u>=n?void 0:e[u]}))},"90e3":function(t,e,n){var r=n("e330"),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},9112:function(t,e,n){var r=n("83ab"),o=n("9bf2"),i=n("5c6c");t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"94ca":function(t,e,n){var r=n("d039"),o=n("1626"),i=/#|\.prototype\./,a=function(t,e){var n=s[u(t)];return n==f||n!=c&&(o(e)?r(e):!!e)},u=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},9861:function(t,e,n){n("5352")},"986a":function(t,e,n){"use strict";var r=n("ebb5"),o=n("a258").findLast,i=r.aTypedArray,a=r.exportTypedArrayMethod;a("findLast",(function(t){return o(i(this),t,arguments.length>1?arguments[1]:void 0)}))},"9a1f":function(t,e,n){var r=n("c65b"),o=n("59ed"),i=n("825a"),a=n("0d51"),u=n("35a1"),s=TypeError;t.exports=function(t,e){var n=arguments.length<2?u(t):e;if(o(n))return i(r(n,t));throw s(a(t)+" is not iterable")}},"9bdd":function(t,e,n){var r=n("825a"),o=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(a){o(t,"throw",a)}}},"9bf2":function(t,e,n){var r=n("83ab"),o=n("0cfb"),i=n("aed9"),a=n("825a"),u=n("a04b"),s=TypeError,c=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",h="configurable",d="writable";e.f=r?i?function(t,e,n){if(a(t),e=u(e),a(n),"function"===typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var r=f(t,e);r&&r[d]&&(t[e]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:l in n?n[l]:r[l],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(a(t),e=u(e),a(n),o)try{return c(t,e,n)}catch(r){}if("get"in n||"set"in n)throw s("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},a04b:function(t,e,n){var r=n("c04e"),o=n("d9b5");t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},a078:function(t,e,n){var r=n("0366"),o=n("c65b"),i=n("5087"),a=n("7b0b"),u=n("07fa"),s=n("9a1f"),c=n("35a1"),f=n("e95a"),l=n("bcbf"),h=n("ebb5").aTypedArrayConstructor,d=n("f495");t.exports=function(t){var e,n,p,v,y,b,g,m,w=i(this),_=a(t),x=arguments.length,k=x>1?arguments[1]:void 0,A=void 0!==k,S=c(_);if(S&&!f(S)){g=s(_,S),m=g.next,_=[];while(!(b=o(m,g)).done)_.push(b.value)}for(A&&x>2&&(k=r(k,arguments[2])),n=u(_),p=new(h(w))(n),v=l(p),e=0;n>e;e++)y=A?k(_[e],e):_[e],p[e]=v?d(y):+y;return p}},a258:function(t,e,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),a=n("07fa"),u=function(t){var e=1==t;return function(n,u,s){var c,f,l=i(n),h=o(l),d=r(u,s),p=a(h);while(p-- >0)if(c=h[p],f=d(c,p,l),f)switch(t){case 0:return c;case 1:return p}return e?-1:void 0}};t.exports={findLast:u(0),findLastIndex:u(1)}},addb:function(t,e,n){var r=n("4dae"),o=Math.floor,i=function(t,e){var n=t.length,s=o(n/2);return n<8?a(t,e):u(t,i(r(t,0,s),e),i(r(t,s),e),e)},a=function(t,e){var n,r,o=t.length,i=1;while(i<o){r=i,n=t[i];while(r&&e(t[r-1],n)>0)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},u=function(t,e,n,r){var o=e.length,i=n.length,a=0,u=0;while(a<o||u<i)t[a+u]=a<o&&u<i?r(e[a],n[u])<=0?e[a++]:n[u++]:a<o?e[a++]:n[u++];return t};t.exports=i},ae93:function(t,e,n){"use strict";var r,o,i,a=n("d039"),u=n("1626"),s=n("861d"),c=n("7c73"),f=n("e163"),l=n("cb2d"),h=n("b622"),d=n("c430"),p=h("iterator"),v=!1;[].keys&&(i=[].keys(),"next"in i?(o=f(f(i)),o!==Object.prototype&&(r=o)):v=!0);var y=!s(r)||a((function(){var t={};return r[p].call(t)!==t}));y?r={}:d&&(r=c(r)),u(r[p])||l(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},aed9:function(t,e,n){var r=n("83ab"),o=n("d039");t.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},b42e:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var e=+t;return(e>0?r:n)(e)}},b622:function(t,e,n){var r=n("da84"),o=n("5692"),i=n("1a2d"),a=n("90e3"),u=n("04f8"),s=n("fdbf"),c=r.Symbol,f=o("wks"),l=s?c["for"]||c:c&&c.withoutSetter||a;t.exports=function(t){return i(f,t)||(f[t]=u&&i(c,t)?c[t]:l("Symbol."+t)),f[t]}},b727:function(t,e,n){var r=n("0366"),o=n("e330"),i=n("44ad"),a=n("7b0b"),u=n("07fa"),s=n("65f0"),c=o([].push),f=function(t){var e=1==t,n=2==t,o=3==t,f=4==t,l=6==t,h=7==t,d=5==t||l;return function(p,v,y,b){for(var g,m,w=a(p),_=i(w),x=r(v,y),k=u(_),A=0,S=b||s,O=e?S(p,k):n||h?S(p,0):void 0;k>A;A++)if((d||A in _)&&(g=_[A],m=x(g,A,w),t))if(e)O[A]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return A;case 2:c(O,g)}else switch(t){case 4:return!1;case 7:c(O,g)}return l?-1:o||f?f:O}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},bcbf:function(t,e,n){var r=n("f5df");t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},bec6:function(t,e,n){"use strict";n.r(e);var r=n("4dec");class o{constructor(){this.valor_dolar=null,this.create_at=null}}class i{constructor(){this.producto_id=null,this.tipo="",this.cantidad=0,this.fecha=null,this.referencia="",this.create_at=null}}class a{constructor(){this.cedula="",this.nombre="",this.telefono="",this.create_at=null,this.update_at=null}}const u=new r["a"]("BODEGUITA");u.version(1).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at",ventas:"++id, total, *productos, create_at, update_at"}),u.version(2).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad"}),u.version(3).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia"}),u.version(4).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo"}),u.version(5).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva"}),u.version(6).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),u.version(7).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]"}),u.version(8).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value"}),u.version(9).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),u.version(10).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),u.version(11).stores({valores_dolar:"++id, valor, create_at, update_at",productos:"++id, &nombre, valor, create_at, update_at, cantidad, porcentaje_ganancia, costo, porcentaje_iva",ventas:"++id, total, *productos, create_at, update_at, metodo_pago, numero_factura, cliente_id, estado, monto_pagado, monto_exento, monto_base, monto_iva, tasa_iva, monto_igtf, tasa_dolar, monto_dolar",movimientos:"++id, producto_id, tipo, cantidad, fecha, referencia, [producto_id+fecha]",configuracion:"&key, value",clientes:"++id, &cedula, nombre, telefono, create_at, update_at"}),u.open().catch((function(t){console.error("Fallo al abrir la base de datos: "+(t.stack||t))})),u.valores_dolar.mapToClass(o),u.movimientos.mapToClass(i),u.clientes.mapToClass(a);n("fb2c"),n("907a"),n("735e"),n("3c5d"),n("219c"),n("fa9e"),n("77d9"),n("5cc6"),n("ddb0"),n("2b3d"),n("9861");let s;function c(t,e){return t>>>=0,g(t,e)}let f=null;function l(){return null!==f&&0!==f.byteLength||(f=new Uint32Array(s.memory.buffer)),f}let h=null;function d(){return null!==h&&0!==h.byteLength||(h=new Uint8Array(s.memory.buffer)),h}function p(t,e){const n=e(4*t.length,4)>>>0;return l().set(t,n/4),m=t.length,n}let v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();const y=2146435072;let b=0;function g(t,e){return b+=e,b>=y&&(v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),v.decode(),b=e),v.decode(d().subarray(t,t+e))}let m=0;function w(t,e){let n,r;try{const o=p(t,s.__wbindgen_malloc),i=m,a=p(e,s.__wbindgen_malloc),u=m,f=s.train_model_wasm(o,i,a,u);return n=f[0],r=f[1],c(f[0],f[1])}finally{s.__wbindgen_free(n,r,1)}}const _=new Set(["basic","cors","default"]);async function x(t,e){if("function"===typeof Response&&t instanceof Response){if("function"===typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(n){const e=t.ok&&_.has(t.type);if(!e||"application/wasm"===t.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await t.arrayBuffer();return await WebAssembly.instantiate(r,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function k(){const t={wbg:{}};return t.wbg.__wbindgen_init_externref_table=function(){const t=s.__wbindgen_externrefs,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)},t}function A(t,e){return s=t.exports,S.__wbindgen_wasm_module=e,f=null,h=null,s.__wbindgen_start(),s}async function S(t){if(void 0!==s)return s;"undefined"!==typeof t&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),"undefined"===typeof t&&(t=new URL("bodeguita_recommendations_bg.wasm",self.location.href));const e=k();("string"===typeof t||"function"===typeof Request&&t instanceof Request||"function"===typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await x(await t,e);return A(n,r)}var O=S;const P=0;let E={},j=[];console.log("[Worker] Worker initialized");let T=null;const R=async()=>{try{if(!T)throw new Error("WASM source not configured. Worker did not receive INIT message.");console.log("[Worker] Initializing WASM..."),await O(T);const t=await u.ventas.toArray();console.log(`[Worker] Training with ${t.length} sales records...`);let e=[],n=[];t.forEach((t=>{if(!t.productos||t.productos.length<2)return;const r=t.productos.map((t=>t.id));e.push(...r),n.push(r.length)}));const r=new Int32Array(e),o=new Int32Array(n);console.time("WASM_Training");const i=w(r,o);console.timeEnd("WASM_Training"),E=JSON.parse(i),console.log("[Worker] Recommendation model trained (WASM powered)")}catch(t){console.error("[Worker] Error training model with WASM:",t),console.warn("[Worker] Falling back to JS implementation...");try{const t=await u.ventas.toArray(),e={};t.forEach((t=>{if(!t.productos||t.productos.length<2)return;const n=t.productos.map((t=>t.id));for(let r=0;r<n.length;r++){const t=n[r];e[t]||(e[t]={});for(let o=0;o<n.length;o++){if(r===o)continue;const i=n[o];e[t][i]=(e[t][i]||0)+1}}})),E=e,console.log("[Worker] Recommendation model trained (JS Fallback)")}catch(e){console.error("[Worker] JS Fallback also failed:",e)}}},I=async()=>{try{const t=await u.productos.where("cantidad").above(0).toArray(),e=Date.now(),n=e-24*P*60*60*1e3,r=[];for(const o of t){const t=await u.movimientos.where("[producto_id+fecha]").between([o.id,n],[o.id,e]).filter((t=>"SALIDA"===t.tipo)).last();t||r.push(o)}j=r,console.log(`[Worker] Found ${j.length} stagnant products`)}catch(t){console.error("[Worker] Error finding stagnant products:",t)}},C=async(t,e=[])=>{0===Object.keys(E).length&&(await R(),await I());const n=E[t];if(console.log(`[Worker] GetRec for ID: ${t}`),!n)return console.log(`[Worker] No co-occurrence data for product ${t}`),null;const r=Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>parseInt(t)));console.log("[Worker] Top related IDs:",r.slice(0,5));const o=r.slice(0,5),i=await u.productos.where("id").anyOf(o).toArray();let a=null,s=null;for(const u of r){if(e.includes(u))continue;const t=i.find((t=>t.id===u));if(!t||t.cantidad<=0)continue;const n=j.some((t=>t.id===u));if(n){a=t;break}s||(s=t)}if(a)return console.log(`[Worker] Match found (Stagnant & Related): ${a.nombre} (ID: ${a.id})`),a;if(s)return console.log(`[Worker] Match found (Related & In Stock): ${s.nombre} (ID: ${s.id})`),s;console.log("[Worker] No related match found. Trying generic fallback...");const c=j.find((t=>!e.includes(t.id)));return c?(console.log(`[Worker] Fallback match found: ${c.nombre} (ID: ${c.id})`),c):null};self.onmessage=async t=>{const{type:e,payload:n,id:r}=t.data;try{switch(e){case"INIT":console.log("[Worker] Received INIT config"),T=n.wasmBytes||n.wasmUrl;break;case"TRAIN":await R(),await I(),self.postMessage({type:"TRAIN_SUCCESS",id:r});break;case"RECOMMEND":const t=await C(n.currentProductId,n.excludedIds);self.postMessage({type:"RECOMMEND_RESULT",payload:t,id:r});break;default:console.warn("[Worker] Unknown message type:",e)}}catch(o){self.postMessage({type:"ERROR",payload:o.message,id:r})}}},c04e:function(t,e,n){var r=n("c65b"),o=n("861d"),i=n("d9b5"),a=n("dc4a"),u=n("485a"),s=n("b622"),c=TypeError,f=s("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,s=a(t,f);if(s){if(void 0===e&&(e="default"),n=r(s,t,e),!o(n)||i(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},c430:function(t,e){t.exports=!1},c65b:function(t,e,n){var r=n("40d5"),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},c6b6:function(t,e,n){var r=n("e330"),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},c6cd:function(t,e,n){var r=n("da84"),o=n("6374"),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},c6d2:function(t,e,n){"use strict";var r=n("23e7"),o=n("c65b"),i=n("c430"),a=n("5e77"),u=n("1626"),s=n("dcc3"),c=n("e163"),f=n("d2bb"),l=n("d44e"),h=n("9112"),d=n("cb2d"),p=n("b622"),v=n("3f8c"),y=n("ae93"),b=a.PROPER,g=a.CONFIGURABLE,m=y.IteratorPrototype,w=y.BUGGY_SAFARI_ITERATORS,_=p("iterator"),x="keys",k="values",A="entries",S=function(){return this};t.exports=function(t,e,n,a,p,y,O){s(n,e,a);var P,E,j,T=function(t){if(t===p&&D)return D;if(!w&&t in C)return C[t];switch(t){case x:return function(){return new n(this,t)};case k:return function(){return new n(this,t)};case A:return function(){return new n(this,t)}}return function(){return new n(this)}},R=e+" Iterator",I=!1,C=t.prototype,B=C[_]||C["@@iterator"]||p&&C[p],D=!w&&B||T(p),F="Array"==e&&C.entries||B;if(F&&(P=c(F.call(new t)),P!==Object.prototype&&P.next&&(i||c(P)===m||(f?f(P,m):u(P[_])||d(P,_,S)),l(P,R,!0,!0),i&&(v[R]=S))),b&&p==k&&B&&B.name!==k&&(!i&&g?h(C,"name",k):(I=!0,D=function(){return o(B,this)})),p)if(E={values:T(k),keys:y?D:T(x),entries:T(A)},O)for(j in E)(w||I||!(j in C))&&d(C,j,E[j]);else r({target:e,proto:!0,forced:w||I},E);return i&&!O||C[_]===D||d(C,_,D,{name:p}),v[e]=D,E}},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},ca84:function(t,e,n){var r=n("e330"),o=n("1a2d"),i=n("fc6a"),a=n("4d64").indexOf,u=n("d012"),s=r([].push);t.exports=function(t,e){var n,r=i(t),c=0,f=[];for(n in r)!o(u,n)&&o(r,n)&&s(f,n);while(e.length>c)o(r,n=e[c++])&&(~a(f,n)||s(f,n));return f}},cb2d:function(t,e,n){var r=n("1626"),o=n("9bf2"),i=n("13d2"),a=n("6374");t.exports=function(t,e,n,u){u||(u={});var s=u.enumerable,c=void 0!==u.name?u.name:e;if(r(n)&&i(n,c,u),u.global)s?t[e]=n:a(e,n);else{try{u.unsafe?t[e]&&(s=!0):delete t[e]}catch(f){}s?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},cc12:function(t,e,n){var r=n("da84"),o=n("861d"),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},cdce:function(t,e,n){var r=n("da84"),o=n("1626"),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("da84"),o=n("1626"),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(r[t]):r[t]&&r[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);e.f=i?function(t){var e=o(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("7282"),o=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(a){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},d44e:function(t,e,n){var r=n("9bf2").f,o=n("1a2d"),i=n("b622"),a=i("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,a)&&r(t,a,{configurable:!0,value:e})}},d6d6:function(t,e){var n=TypeError;t.exports=function(t,e){if(t<e)throw n("Not enough arguments");return t}},d998:function(t,e,n){var r=n("342f");t.exports=/MSIE|Trident/.test(r)},d9b5:function(t,e,n){var r=n("d066"),o=n("1626"),i=n("3a9b"),a=n("fdbf"),u=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,u(t))}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(t,e,n){var r=n("59ed"),o=n("7234");t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},dcc3:function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,o=n("7c73"),i=n("5c6c"),a=n("d44e"),u=n("3f8c"),s=function(){return this};t.exports=function(t,e,n,c){var f=e+" Iterator";return t.prototype=o(r,{next:i(+!c,n)}),a(t,f,!1,!0),u[f]=s,t}},ddb0:function(t,e,n){var r=n("da84"),o=n("fdbc"),i=n("785a"),a=n("e260"),u=n("9112"),s=n("b622"),c=s("iterator"),f=s("toStringTag"),l=a.values,h=function(t,e){if(t){if(t[c]!==l)try{u(t,c,l)}catch(r){t[c]=l}if(t[f]||u(t,f,e),o[e])for(var n in a)if(t[n]!==a[n])try{u(t,n,a[n])}catch(r){t[n]=a[n]}}};for(var d in o)h(r[d]&&r[d].prototype,d);h(i,"DOMTokenList")},df75:function(t,e,n){var r=n("ca84"),o=n("7839");t.exports=Object.keys||function(t){return r(t,o)}},e163:function(t,e,n){var r=n("1a2d"),o=n("1626"),i=n("7b0b"),a=n("f772"),u=n("e177"),s=a("IE_PROTO"),c=Object,f=c.prototype;t.exports=u?c.getPrototypeOf:function(t){var e=i(t);if(r(e,s))return e[s];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof c?f:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),o=n("44d2"),i=n("3f8c"),a=n("69f3"),u=n("9bf2").f,s=n("c6d2"),c=n("4754"),f=n("c430"),l=n("83ab"),h="Array Iterator",d=a.set,p=a.getterFor(h);t.exports=s(Array,"Array",(function(t,e){d(this,{type:h,target:r(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?e[r]:[r,e[r]],!1)}),"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!f&&l&&"values"!==v.name)try{u(v,"name",{value:"values"})}catch(y){}},e330:function(t,e,n){var r=n("40d5"),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?a:function(t){return function(){return i.apply(t,arguments)}}},e893:function(t,e,n){var r=n("1a2d"),o=n("56ef"),i=n("06cf"),a=n("9bf2");t.exports=function(t,e,n){for(var u=o(e),s=a.f,c=i.f,f=0;f<u.length;f++){var l=u[f];r(t,l)||n&&r(n,l)||s(t,l,c(e,l))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),o=n("3f8c"),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},eac5:function(t,e,n){var r=n("861d"),o=Math.floor;t.exports=Number.isInteger||function(t){return!r(t)&&isFinite(t)&&o(t)===t}},ebb5:function(t,e,n){"use strict";var r,o,i,a=n("4b11"),u=n("83ab"),s=n("da84"),c=n("1626"),f=n("861d"),l=n("1a2d"),h=n("f5df"),d=n("0d51"),p=n("9112"),v=n("cb2d"),y=n("edd0"),b=n("3a9b"),g=n("e163"),m=n("d2bb"),w=n("b622"),_=n("90e3"),x=n("69f3"),k=x.enforce,A=x.get,S=s.Int8Array,O=S&&S.prototype,P=s.Uint8ClampedArray,E=P&&P.prototype,j=S&&g(S),T=O&&g(O),R=Object.prototype,I=s.TypeError,C=w("toStringTag"),B=_("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",F=a&&!!m&&"Opera"!==h(s.opera),M=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},K={BigInt64Array:8,BigUint64Array:8},U=function(t){if(!f(t))return!1;var e=h(t);return"DataView"===e||l(L,e)||l(K,e)},q=function(t){var e=g(t);if(f(e)){var n=A(e);return n&&l(n,D)?n[D]:q(e)}},N=function(t){if(!f(t))return!1;var e=h(t);return l(L,e)||l(K,e)},W=function(t){if(N(t))return t;throw I("Target is not a typed array")},H=function(t){if(c(t)&&(!m||b(j,t)))return t;throw I(d(t)+" is not a typed array constructor")},V=function(t,e,n,r){if(u){if(n)for(var o in L){var i=s[o];if(i&&l(i.prototype,t))try{delete i.prototype[t]}catch(a){try{i.prototype[t]=e}catch(c){}}}T[t]&&!n||v(T,t,n?e:F&&O[t]||e,r)}},z=function(t,e,n){var r,o;if(u){if(m){if(n)for(r in L)if(o=s[r],o&&l(o,t))try{delete o[t]}catch(i){}if(j[t]&&!n)return;try{return v(j,t,n?e:F&&j[t]||e)}catch(i){}}for(r in L)o=s[r],!o||o[t]&&!n||v(o,t,e)}};for(r in L)o=s[r],i=o&&o.prototype,i?k(i)[D]=o:F=!1;for(r in K)o=s[r],i=o&&o.prototype,i&&(k(i)[D]=o);if((!F||!c(j)||j===Function.prototype)&&(j=function(){throw I("Incorrect invocation")},F))for(r in L)s[r]&&m(s[r],j);if((!F||!T||T===R)&&(T=j.prototype,F))for(r in L)s[r]&&m(s[r].prototype,T);if(F&&g(E)!==T&&m(E,T),u&&!l(T,C))for(r in M=!0,y(T,C,{configurable:!0,get:function(){return f(this)?this[B]:void 0}}),L)s[r]&&p(s[r],B,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:M&&B,aTypedArray:W,aTypedArrayConstructor:H,exportTypedArrayMethod:V,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:q,isView:U,isTypedArray:N,TypedArray:j,TypedArrayPrototype:T}},edd0:function(t,e,n){var r=n("13d2"),o=n("9bf2");t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},f354:function(t,e,n){var r=n("d039"),o=n("b622"),i=n("83ab"),a=n("c430"),u=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e["delete"]("b"),n+=r+t})),a&&!t.toJSON||!e.size&&(a||!i)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[u]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},f495:function(t,e,n){var r=n("c04e"),o=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw o("Can't convert number to bigint");return BigInt(e)}},f5df:function(t,e,n){var r=n("00ee"),o=n("1626"),i=n("c6b6"),a=n("b622"),u=a("toStringTag"),s=Object,c="Arguments"==i(function(){return arguments}()),f=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=f(e=s(t),u))?n:c?i(e):"Object"==(r=i(e))&&o(e.callee)?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),o=n("90e3"),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},f8cd:function(t,e,n){var r=n("5926"),o=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw o("The argument can't be less than 0");return e}},fa9e:function(t,e,n){n("986a")},fb2c:function(t,e,n){var r=n("74e8");r("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},fc6a:function(t,e,n){var r=n("44ad"),o=n("1d80");t.exports=function(t){return r(o(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("04f8");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}});